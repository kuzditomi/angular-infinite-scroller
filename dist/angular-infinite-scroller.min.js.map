{"version":3,"sources":["webpack:///webpack/bootstrap ef127dbe3225b448ecfc","webpack:///./src/elements-manager.ts","webpack:///./src/module.ts","webpack:///./src/descriptor.ts","webpack:///./src/scroll-settings.ts","webpack:///./src/dom-manager.ts","webpack:///./src/scroll-detector.ts","webpack:///./src/scroller.ts","webpack:///./src/elements-manager-factory.ts","webpack:///./src/track-by-elements-manager.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","ElementsManager","descriptor","domManager","linker","_this","this","fixDisplayWindow","endDiff","displayTo","collection","length","fixedFrom","displayFrom","cleanUpBottom","items","removeElement","overwriteScopes","Scope","IndexExpression","$on","onDestroy","UpdateCollection","newCollection","fillBottom","AddTop","countTillStop","Settings","BufferSize","newElement","transcludeElement","PrependElement","Element","unshift","AddBottom","parentBottom","GetScrollBottomPosition","overflowCounter","item","AppendElement","push","blockEl","GetElementBottomPosition","RemoveTop","hasInvisibleChildren","el","GetScrollTopPosition","RemoveBottom","GetElementTopPosition","lastItem","index","childScope","$new","clone","splice","Remove","$destroy","descriptor_1","dom_manager_1","scroll_detector_1","scroller_1","elements_manager_factory_1","scrollerModule","angular","directive","parser","priority","restrict","transclude","link","scope","element","attr","_ctrl","Descriptor","createFrom","DOMManager","scrollDetector","ScrollDetector","elementsManager","ElementsManagerFactory","Scroller","Subscribe","scroll_settings_1","settings","ScrollSettings","expressionDesc","parseExpression","infiniteScroller","CollectionExpression","TrackByExpression","trackBy","expression","match","rhs","trackByExp","settingsObject","size","parseInt","isNaN","_a","offsetTop","remove","containerElement","scrollTop","offsetHeight","GetRelativePositionOf","elementRatio","container","append","prepend","AppendElementToContainer","containerToAppend","PrependElementToContainer","containerToPrepend","FixScroll","relativePosition","scrollTo","UpdateElementsWith","elements","innerHTML","_i","elements_1","appendChild","parent","lastScrollTop","BUFFER_COUNT","SubscribeToElement","parentEl","onscroll","current","bottom","scrollHeight","OnScrollDown","topElement","children","OnScrollUp","clientHeight","onCollectionUpdated","onScrollDown","$apply","onScrollUp","$watchCollection","elements_manager_1","track_by_elements_manager_1","TrackByElementsManager","_super","trackByParser","trackedItems","tempScope","__extends","originalLength","updateItemsList","updateElements","TrackByValue","newItemList","newItemsHash","trackByKey","getTrackByOfCollectionItem","trackedItem","newItem","keys","key","map"],"mappings":"aACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAZ,EAAAmB,EAAA,SAAAhB,GACA,IAAAS,EAAAT,KAAAiB,WACA,WAA2B,OAAAjB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAQ,EAAAC,GAAsD,OAAAR,OAAAS,UAAAC,eAAAjB,KAAAc,EAAAC,IAGtDtB,EAAAyB,EAAA,GAGAzB,IAAA0B,EAAA,mFC7CA,IAAAC,EAAA,WAMI,SAAAA,EAA6BC,EAAkCC,EAAmCC,GAAlG,IAAAC,EAAAC,KAA6BA,KAAAJ,aAAkCI,KAAAH,aAAmCG,KAAAF,SAgGxFE,KAAAC,iBAAmB,WACzB,IAAMC,EAAUH,EAAKI,UAAYJ,EAAKK,WAAWC,OACjD,GAAIH,EAAU,EAAG,CACbH,EAAKI,WAAaD,EAClB,IAAMI,EAAYP,EAAKQ,YAAcL,EACrCH,EAAKQ,YAAcD,EAAY,EAAIA,EAAY,IAwB7CN,KAAAQ,cAAgB,WAEtB,IADA,IAAIpC,EAAI2B,EAAKK,WAAWC,OACjBjC,EAAI2B,EAAKU,MAAMJ,QAClBN,EAAKW,cAActC,IAwBnB4B,KAAAW,gBAAkB,WACtB,IAAK,IAAIvC,EAAI,EAAGA,EAAI2B,EAAKU,MAAMJ,OAAQjC,IAAK,CAC3B2B,EAAKU,MAAMrC,GACnBwC,MAAMb,EAAKH,WAAWiB,iBAAmBd,EAAKK,WAAWL,EAAKQ,YAAcnC,KA1JrF4B,KAAKI,cACLJ,KAAKS,SACLT,KAAKO,YAAc,EACnBP,KAAKG,UAAY,EAEjBH,KAAKJ,WAAWgB,MAAME,IAAI,WAAY,WAAM,OAAAf,EAAKgB,YAwJzD,OArJWpB,EAAAJ,UAAAyB,iBAAP,SAAwBC,GACpBjB,KAAKI,WAAaa,EAClBjB,KAAKC,mBACLD,KAAKkB,aACLlB,KAAKW,kBACLX,KAAKQ,iBAGFb,EAAAJ,UAAA4B,OAAP,WACI,IAAIC,EAAgBpB,KAAKJ,WAAWyB,SAASC,WAEzClD,EAAI,EACR,IAAKA,EAAI4B,KAAKO,YAAc,EAAGnC,GAAK,GAAKgD,EAAgB,EAAGhD,IAAK,CAC7D,IAAMmD,EAAavB,KAAKwB,kBAAkBpD,GAC1C4B,KAAKH,WAAW4B,eAAeF,EAAWG,SAC1C1B,KAAKS,MAAMkB,QAAQJ,GAEnBH,IAGJpB,KAAKO,YAAcnC,EAAI,GAGpBuB,EAAAJ,UAAAqC,UAAP,WACI,IAAMC,EAAe7B,KAAKH,WAAWiC,0BAGjCC,EAAkB/B,KAAKJ,WAAWyB,SAASC,WAE3ClD,EAAI,EACR,IAAKA,EAAI4B,KAAKG,UAAW/B,EAAI4B,KAAKI,WAAWC,QAAU0B,EAAkB,EAAG3D,IAAK,CAC7E,IAAM4D,EAAOhC,KAAKwB,kBAAkBpD,GACpC4B,KAAKH,WAAWoC,cAAcD,EAAKN,SACnC1B,KAAKS,MAAMyB,KAAKF,GAEhB,IAAMG,EAAUH,EAAKN,QACD1B,KAAKH,WAAWuC,yBAAyBD,GAE3CN,GACdE,IAIR/B,KAAKG,UAAY/B,GAGduB,EAAAJ,UAAA8C,UAAP,WAEI,IADA,IAAIC,GAAuB,EACpBA,KACCtC,KAAKS,MAAMJ,QAAUL,KAAKJ,WAAWyB,SAASC,aADzB,CAKzB,IAAMiB,EAAKvC,KAAKS,MAAMT,KAAKJ,WAAWyB,SAASC,YAAYI,QACrC1B,KAAKH,WAAWuC,yBAAyBG,GAC7CvC,KAAKH,WAAW2C,wBAG9BxC,KAAKU,cAAc,GACnBV,KAAKO,eAEL+B,GAAuB,IAK5B3C,EAAAJ,UAAAkD,aAAP,WACI,KAAIzC,KAAKS,MAAMJ,OAASL,KAAKJ,WAAWyB,SAASC,YAKjD,IADA,IAAIgB,GAAuB,EACpBA,GAAsB,CACzB,IAAMC,EAAKvC,KAAKS,MAAMT,KAAKS,MAAMJ,OAASL,KAAKJ,WAAWyB,SAASC,YAAYI,QAC5D1B,KAAKH,WAAW6C,sBAAsBH,GAC1CvC,KAAKH,WAAWiC,2BAG3B9B,KAAKU,cAAcV,KAAKS,MAAMJ,OAAS,GACvCL,KAAKG,aAELmC,GAAuB,IAezB3C,EAAAJ,UAAAwB,UAAV,WACIf,KAAKS,UAGCd,EAAAJ,UAAA2B,WAAV,WACI,IAAMW,EAAe7B,KAAKH,WAAWiC,0BAGrC,GAAI9B,KAAKS,MAAMJ,OAAS,EAAG,CACvB,IAAMsC,EAAW3C,KAAKS,MAAMT,KAAKS,MAAMJ,OAAS,GAGhD,GAFuBL,KAAKH,WAAWuC,yBAAyBO,EAASjB,SAEpDG,EACjB,OAIR7B,KAAK4B,aAUCjC,EAAAJ,UAAAiC,kBAAV,SAA4BoB,GACxB,IAAMZ,KAEAa,EAAa7C,KAAKJ,WAAWgB,MAAMkC,OAQzC,OAPAD,EAAW7C,KAAKJ,WAAWiB,iBAAmBb,KAAKI,WAAWwC,GAE9D5C,KAAKF,OAAO+C,EAAY,SAACE,GACrBf,EAAKN,QAAUqB,EACff,EAAKpB,MAAQiC,IAGVb,GAGDrC,EAAAJ,UAAAmB,cAAV,SAAwBkC,GACpB,IAAMZ,EAAOhC,KAAKS,MAAMuC,OAAOJ,EAAO,GAAG,GACzC5C,KAAKH,WAAWoD,OAAOjB,EAAKN,SAC5BM,EAAKpB,MAAMsC,YASnBvD,EApKA,GAAazB,EAAAyB,iGChBb,IAAAwD,EAAAnF,EAAA,GACAoF,EAAApF,EAAA,GACAqF,EAAArF,EAAA,GACAsF,EAAAtF,EAAA,GACAuF,EAAAvF,EAAA,GAIaE,EAAAsF,eAAiBC,QAAQtF,OAAO,gCAE7CD,EAAAsF,eAAeE,UAAU,oBAAqB,SAAU,SAACC,GACrD,OACIC,SAAU,IACVC,SAAU,IACVC,WAAY,UACZC,KAAM,SAACC,EAAkBC,EAA8BC,EAAsBC,EAAOrE,GAChF,IAAMF,EAAauD,EAAAiB,WAAWC,WAAWL,EAAOE,GAC1CrE,EAAa,IAAIuD,EAAAkB,WAAWL,GAC5BM,EAAiB,IAAIlB,EAAAmB,eAAeP,GACpCQ,EAAkBlB,EAAAmB,uBAAuBL,WAAWzE,EAAYC,EAAYC,EAAQ6D,GAEzE,IAAIL,EAAAqB,SAAS/E,EAAY2E,EAAgBE,GAEjDG,gGCvBrB,IAAAC,EAAA7G,EAAA,GAQAoG,EAAA,WAOI,SAAAA,KAiCJ,OA/BWA,EAAAC,WAAP,SAAkBL,EAAkBE,GAChC,IAAMY,EAAWD,EAAAE,eAAeV,WAAWH,GACrCc,EAAiBZ,EAAWa,gBAAgBf,EAAKgB,kBAEjDtF,EAAa,IAAIwE,EAOvB,OANAxE,EAAWuF,qBAAuBH,EAAe5E,WACjDR,EAAWiB,gBAAkBmE,EAAepC,MAC5ChD,EAAWwF,kBAAoBJ,EAAeK,QAC9CzF,EAAWgB,MAAQoD,EACnBpE,EAAWyB,SAAWyD,EAEflF,GAGIwE,EAAAa,gBAAf,SAA+BK,GAE3B,IAAIC,EAAQD,EAAWC,MAAM,8FAE7B,IAAKA,EACD,KAAM,oFAAoFD,EAAU,KAGxG,IAAME,EAAMD,EAAM,GACZE,EAAaF,EAAM,GAEzB,OACInF,WAAYoF,EACZ5C,MAAO2C,EAAM,GACbF,QAASI,IAGrBrB,EAxCA,GAAalG,EAAAkG,4FCRb,IAAAW,EAAA,WAGI,SAAAA,IACI/E,KAAKsB,WAAa,GAoB1B,OAjBWyD,EAAAV,WAAP,SAAkBH,GACd,IAAMwB,EAAiB,IAAIX,EAE3B,GAAIb,EAAuB,iBACvB,IACI,IAAMyB,EAAOC,SAAS1B,EAAuB,kBAC7C,GAAI2B,MAAMF,GACN,KAAM,GAEVD,EAAepE,WAAaqE,EAC9B,MAAOG,GACL,KAAM,yEAId,OAAOJ,GAEfX,EAxBA,GAAa7G,EAAA6G,gGCmBb,IAAAT,EAAA,WAqCA,OAjCI,SAAYL,GAAZ,IAAAlE,EAAAC,KAKAA,KAAA0C,sBAAwB,SAACuB,GAAyC,OAAAA,EAAQ,GAAG8B,WAE7E/F,KAAAiD,OAAS,SAACgB,GAAiC,OAAAA,EAAQ+B,UAEnDhG,KAAAwC,qBAAuB,WAAM,OAAAzC,EAAKkG,iBAAiBF,UAAYhG,EAAKkG,iBAAiBC,WAErFlG,KAAAoC,yBAA2B,SAAC6B,GAAiC,OAAAA,EAAQ,GAAG8B,UAAY9B,EAAQ,GAAGkC,cAE/FnG,KAAA8B,wBAA0B,WAAM,OAAA/B,EAAKkG,iBAAiBF,UAAYhG,EAAKkG,iBAAiBC,UAAYnG,EAAKkG,iBAAiBE,cAE1HnG,KAAAoG,sBAAwB,SAACC,GAAyB,OAAAtG,EAAKkG,iBAAiBF,UAAYhG,EAAKkG,iBAAiBE,aAAeE,GAEzHrG,KAAAiC,cAAgB,SAACgC,GAAiC,OAAAlE,EAAKuG,UAAUC,OAAOtC,IAExEjE,KAAAyB,eAAiB,SAACwC,GAAiC,OAAAlE,EAAKuG,UAAUE,QAAQvC,IAE1EjE,KAAAyG,yBAA2B,SAACxC,EAA8ByC,GAA2C,OAAAA,EAAkBH,OAAOtC,IAE9HjE,KAAA2G,0BAA4B,SAAC1C,EAA8B2C,GAA4C,OAAAA,EAAmBJ,QAAQvC,IAElIjE,KAAA6G,UAAY,SAACC,GAA6B,OAAA/G,EAAKkG,iBAAiBc,SAAS,EAAGhH,EAAKkG,iBAAiBE,aAAeW,IAEjH9G,KAAAgH,mBAAqB,SAACC,GAClBlH,EAAKkG,iBAAiBiB,UAAY,GAClC,IAAoB,IAAAC,EAAA,EAAAC,EAAAH,EAAAE,EAAAC,EAAA/G,OAAA8G,IAAQ,CAAvB,IAAIlD,EAAOmD,EAAAD,GACZpH,EAAKkG,iBAAiBoB,YAAYpD,EAAQ,MA7B9CjE,KAAKsG,UAAYrC,EAAQqD,SACzBtH,KAAKiG,iBAAmBjG,KAAKsG,UAAU,IAN/C,GAAapI,EAAAoG,4FCnBb,IAAAE,EAAA,WA6BA,OAtBI,SAAoBP,GAApB,IAAAlE,EAAAC,KAAoBA,KAAAiE,UANZjE,KAAAuH,cAAgB,EAChBvH,KAAAwH,aAAe,EAOhBxH,KAAAyH,mBAAqB,WACxB,IAAMC,EAAwB3H,EAAKkE,QAAQqD,SAAS,GAEpDI,EAASC,SAAW,WAChB,GAAI5H,EAAKwH,cAAgBG,EAASxB,UAAW,CACzC,IAAM0B,EAAUF,EAASxB,UAAYwB,EAASvB,aACxC0B,EAASH,EAASI,aAEpB/H,EAAKgI,cAAgBH,IAAYC,GACjC9H,EAAKgI,oBAEN,GAAIhI,EAAKwH,cAAgBG,EAASxB,UAAW,CAChD,IAAM8B,EAAaN,EAASO,SAAS,GACjClI,EAAKmI,YAAcR,EAASxB,WAAc8B,EAAWG,aAAepI,EAAKyH,cACzEzH,EAAKmI,aAGbnI,EAAKwH,cAAgBG,EAASxB,aA1B1C,GAAahI,EAAAsG,gGCIb,IAAAG,EAAA,WAKI,SAAAA,EAA2B/E,EAAgC2E,EAAwCE,GAAnG,IAAA1E,EAAAC,KAA2BA,KAAAJ,aAAgCI,KAAAuE,iBAAwCvE,KAAAyE,kBAU3FzE,KAAAoI,oBAAsB,SAACnH,GAC3BlB,EAAK0E,gBAAgBzD,iBAAiBC,IAGlCjB,KAAAqI,aAAe,WACnBtI,EAAKiE,MAAMsE,OAAO,WACdvI,EAAK0E,gBAAgB7C,YACrB7B,EAAK0E,gBAAgBpC,eAIrBrC,KAAAuI,WAAa,WACjBxI,EAAKiE,MAAMsE,OAAO,WACdvI,EAAK0E,gBAAgBtD,SACrBpB,EAAK0E,gBAAgBhC,kBAvBzBzC,KAAKuE,eAAewD,aAAe/H,KAAKqI,aACxCrI,KAAKuE,eAAe2D,WAAalI,KAAKuI,WAyB9C,OA/BIzJ,OAAAC,eAAY4F,EAAApF,UAAA,aAAZ,WACI,OAAOS,KAAKJ,WAAWgB,uCAQpB+D,EAAApF,UAAAqF,UAAP,WACI5E,KAAKuE,eAAekD,qBACpBzH,KAAKgE,MAAMwE,iBAAiBxI,KAAKJ,WAAWuF,qBAAsBnF,KAAKoI,sBAoB/EzD,EAhCA,GAAazG,EAAAyG,0FCFb,IAAA8D,EAAAzK,EAAA,GACA0K,EAAA1K,EAAA,GAEA0G,EAAA,oBAAAA,KAQA,OAPkBA,EAAAL,WAAd,SAAyBzE,EAAwBC,EAAyBC,EAAgC6D,GACtG,OAAI/D,EAAWwF,kBACJ,IAAIsD,EAAAC,uBAAuB/I,EAAYC,EAAYC,EAAQ6D,GAG/D,IAAI8E,EAAA9I,gBAAgBC,EAAYC,EAAYC,IAE3D4E,EARA,GAAaxG,EAAAwG,0ZCLb,IAQAiE,EAAA,SAAAC,GAOI,SAAAD,EAAmB/I,EAAwBC,EAAyBC,EAAgC6D,GAApG,IAAA5D,EACI6I,EAAArK,KAAAyB,KAAMJ,EAAYC,EAAYC,IAAOE,YAErCD,EAAK8I,cAAgBlF,EAAO/D,EAAWwF,mBACvCrF,EAAK+I,gBACL/I,EAAKgJ,UAAYhJ,EAAKH,WAAWgB,MAAMkC,SA4E/C,OAxF4CkG,EAAAL,EAAAC,GAejCD,EAAApJ,UAAAyB,iBAAP,SAAwBC,GACpB,IAAMgI,EAAiBjJ,KAAKI,WAAWC,OACvCL,KAAKI,WAAaa,EAClBjB,KAAKC,mBACLD,KAAKkB,aAED+H,EAAiB,IACjBjJ,KAAKkJ,kBACLlJ,KAAKmJ,mBAIHR,EAAApJ,UAAAiC,kBAAV,SAA4BoB,GACxB,IAAMZ,EAAO4G,EAAArJ,UAAMiC,kBAAiBjD,KAAAyB,KAAC4C,GAKrC,OAHAZ,EAAKoH,aAAepJ,KAAK6I,cAAc7G,EAAKpB,OAC5CZ,KAAK8I,aAAa9G,EAAKoH,cAAgBpH,EAEhCA,GAGD2G,EAAApJ,UAAAmB,cAAV,SAAwBkC,GACpB,IAAMZ,EAAOhC,KAAKS,MAAMmC,UAChB5C,KAAK8I,aAAa9G,EAAKoH,cAE/BR,EAAArJ,UAAMmB,cAAanC,KAAAyB,KAAC4C,IAGd+F,EAAApJ,UAAAwB,UAAV,WACI6H,EAAArJ,UAAMwB,UAASxC,KAAAyB,MACfA,KAAK+I,UAAU7F,WACflD,KAAK8I,aAAe,MAGhBH,EAAApJ,UAAA2J,gBAAR,WAKI,IAJA,IAAMG,KACAC,KAGGlL,EAAI4B,KAAKO,YAAanC,EAAI4B,KAAKG,UAAW/B,IAAK,CACpD,IAAMmL,EAAavJ,KAAKwJ,2BAA2BpL,GAC7CqL,EAAczJ,KAAK8I,aAAaS,GACtC,GAAIE,EACAJ,EAAYnH,KAAKuH,GACjBH,EAAaC,GAAcE,MACxB,CACH,IAAMC,EAAU1J,KAAKwB,kBAAkBpD,GACvCiL,EAAYnH,KAAKwH,GACjBJ,EAAaC,GAAcG,GAKnC,IAAgB,IAAAvC,EAAA,EAAArB,EAAAhH,OAAO6K,KAAK3J,KAAK8I,cAAjB3B,EAAArB,EAAAzF,OAAA8G,IAA8B,CAAzC,IAAIyC,EAAG9D,EAAAqB,GACHmC,EAAaM,IACd5J,KAAK8I,aAAac,GAAKhJ,MAAMsC,WAIrClD,KAAKS,MAAQ4I,EACbrJ,KAAK8I,aAAeQ,GAGhBX,EAAApJ,UAAA4J,eAAR,WAEI,IAAMlC,EAAWjH,KAAKS,MAAMoJ,IAAI,SAAAzL,GAAK,OAAAA,EAAEsD,UACvC1B,KAAKH,WAAWmH,mBAAmBC,IAG/B0B,EAAApJ,UAAAiK,2BAAR,SAAmC5G,GAE/B,OADA5C,KAAK+I,UAAU/I,KAAKJ,WAAWiB,iBAAmBb,KAAKI,WAAWwC,GAC3D5C,KAAK6I,cAAc7I,KAAK+I,YAEvCJ,EAxFA,CARA3K,EAAA,GAQ4C2B,iBAA/BzB,EAAAyK","file":"angular-infinite-scroller.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ef127dbe3225b448ecfc","import { Descriptor } from './descriptor';\r\nimport { IDOMManager } from './dom-manager';\r\n\r\nexport interface Item {\r\n    Element: ng.IAugmentedJQuery;\r\n    Scope: ng.IScope;\r\n}\r\n\r\nexport interface IElementsManager {\r\n    UpdateCollection(newCollection: any[]): void;\r\n    AddTop(): void;\r\n    AddBottom(): void;\r\n    RemoveTop(): void;\r\n    RemoveBottom(): void;\r\n}\r\n\r\nexport class ElementsManager implements IElementsManager {\r\n    protected collection: any[];\r\n    protected items: Item[];\r\n    protected displayFrom: number;\r\n    protected displayTo: number;\r\n\r\n    public constructor(protected descriptor: Descriptor, protected domManager: IDOMManager, protected linker: ng.ITranscludeFunction) {\r\n        this.collection = [];\r\n        this.items = [];\r\n        this.displayFrom = 0;\r\n        this.displayTo = 0;\r\n\r\n        this.descriptor.Scope.$on('$destroy', () => this.onDestroy);\r\n    }\r\n\r\n    public UpdateCollection(newCollection: any[]) {\r\n        this.collection = newCollection;\r\n        this.fixDisplayWindow();\r\n        this.fillBottom();\r\n        this.overwriteScopes();\r\n        this.cleanUpBottom();\r\n    }\r\n\r\n    public AddTop() {\r\n        let countTillStop = this.descriptor.Settings.BufferSize;\r\n\r\n        let i = 0;\r\n        for (i = this.displayFrom - 1; i >= 0 && countTillStop > 0; i--) {\r\n            const newElement = this.transcludeElement(i);\r\n            this.domManager.PrependElement(newElement.Element);\r\n            this.items.unshift(newElement);\r\n\r\n            countTillStop--;\r\n        }\r\n\r\n        this.displayFrom = i + 1;\r\n    }\r\n\r\n    public AddBottom() {\r\n        const parentBottom = this.domManager.GetScrollBottomPosition();\r\n\r\n        // add this many children below visible area\r\n        let overflowCounter = this.descriptor.Settings.BufferSize;\r\n\r\n        let i = 0;\r\n        for (i = this.displayTo; i < this.collection.length && overflowCounter > 0; i++) {\r\n            const item = this.transcludeElement(i);\r\n            this.domManager.AppendElement(item.Element);\r\n            this.items.push(item);\r\n\r\n            const blockEl = item.Element;\r\n            const blockBottom = this.domManager.GetElementBottomPosition(blockEl);\r\n\r\n            if (blockBottom > parentBottom) {\r\n                overflowCounter--;\r\n            }\r\n        }\r\n\r\n        this.displayTo = i;\r\n    }\r\n\r\n    public RemoveTop() {\r\n        let hasInvisibleChildren = true;\r\n        while (hasInvisibleChildren) {\r\n            if (this.items.length <= this.descriptor.Settings.BufferSize) {\r\n                break;\r\n            }\r\n\r\n            const el = this.items[this.descriptor.Settings.BufferSize].Element;\r\n            const elementBottom = this.domManager.GetElementBottomPosition(el);\r\n            const scrollTop = this.domManager.GetScrollTopPosition();\r\n\r\n            if (elementBottom < scrollTop) {\r\n                this.removeElement(0);\r\n                this.displayFrom++;\r\n            } else {\r\n                hasInvisibleChildren = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    public RemoveBottom() {\r\n        if (this.items.length < this.descriptor.Settings.BufferSize) {\r\n            return;\r\n        }\r\n\r\n        let hasInvisibleChildren = true;\r\n        while (hasInvisibleChildren) {\r\n            const el = this.items[this.items.length - this.descriptor.Settings.BufferSize].Element;\r\n            const elementTop = this.domManager.GetElementTopPosition(el);\r\n            const bottom = this.domManager.GetScrollBottomPosition();\r\n\r\n            if (elementTop > bottom) {\r\n                this.removeElement(this.items.length - 1);\r\n                this.displayTo--;\r\n            } else {\r\n                hasInvisibleChildren = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    // tries to keep the current windows size, but adjust window based on the new collection size\r\n    protected fixDisplayWindow = () => {\r\n        const endDiff = this.displayTo - this.collection.length;\r\n        if (endDiff > 0) {\r\n            this.displayTo -= endDiff;\r\n            const fixedFrom = this.displayFrom - endDiff;\r\n            this.displayFrom = fixedFrom > 0 ? fixedFrom : 0;\r\n        }\r\n    }\r\n\r\n    protected onDestroy() {\r\n        this.items = [];\r\n    }\r\n\r\n    protected fillBottom() {\r\n        const parentBottom = this.domManager.GetScrollBottomPosition();\r\n\r\n        // don't add more if elements are already out of sight\r\n        if (this.items.length > 0) {\r\n            const lastItem = this.items[this.items.length - 1];\r\n            const lastItemBottom = this.domManager.GetElementBottomPosition(lastItem.Element);\r\n\r\n            if (lastItemBottom > parentBottom) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.AddBottom();\r\n    }\r\n\r\n    protected cleanUpBottom = () => {\r\n        let i = this.collection.length;\r\n        while (i < this.items.length) {\r\n            this.removeElement(i);\r\n        }\r\n    }\r\n\r\n    protected transcludeElement(index: number): Item {\r\n        const item = {} as Item;\r\n\r\n        const childScope = this.descriptor.Scope.$new();\r\n        childScope[this.descriptor.IndexExpression] = this.collection[index];\r\n\r\n        this.linker(childScope, (clone: ng.IAugmentedJQuery) => {\r\n            item.Element = clone;\r\n            item.Scope = childScope;\r\n        });\r\n\r\n        return item;\r\n    }\r\n\r\n    protected removeElement(index: number) {\r\n        const item = this.items.splice(index, 1)[0];\r\n        this.domManager.Remove(item.Element);\r\n        item.Scope.$destroy();\r\n    }\r\n\r\n    private overwriteScopes = () => {\r\n        for (let i = 0; i < this.items.length; i++) {\r\n            const item = this.items[i];\r\n            item.Scope[this.descriptor.IndexExpression] = this.collection[this.displayFrom + i];\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/elements-manager.ts","import { Descriptor } from './descriptor';\r\nimport { DOMManager } from './dom-manager';\r\nimport { ScrollDetector } from './scroll-detector';\r\nimport { Scroller } from './scroller';\r\nimport { ElementsManagerFactory } from './elements-manager-factory';\r\n\r\ndeclare var angular;\r\n\r\nexport const scrollerModule = angular.module('angular-infinite-scroller', []);\r\n\r\nscrollerModule.directive('infiniteScroller', ['$parse', (parser: ng.IParseService) => {\r\n    return {\r\n        priority: 1000,\r\n        restrict: 'A',\r\n        transclude: 'element',\r\n        link: (scope: ng.IScope, element: ng.IAugmentedJQuery, attr: ng.IAttributes, _ctrl, linker: ng.ITranscludeFunction) => {\r\n            const descriptor = Descriptor.createFrom(scope, attr);\r\n            const domManager = new DOMManager(element);\r\n            const scrollDetector = new ScrollDetector(element);\r\n            const elementsManager = ElementsManagerFactory.createFrom(descriptor, domManager, linker, parser);\r\n\r\n            const scroller = new Scroller(descriptor, scrollDetector, elementsManager);\r\n\r\n            scroller.Subscribe();\r\n        },\r\n    };\r\n}]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/module.ts","import { ScrollSettings } from './scroll-settings';\r\n\r\ninterface IExpressionDescriptor {\r\n    index: string;\r\n    collection: string;\r\n    trackBy: string;\r\n}\r\n\r\nexport class Descriptor {\r\n    public Settings: ScrollSettings;\r\n    public CollectionExpression: string;\r\n    public IndexExpression: string;\r\n    public TrackByExpression: string;\r\n    public Scope: ng.IScope;\r\n\r\n    private constructor() { }\r\n\r\n    static createFrom(scope: ng.IScope, attr: ng.IAttributes): Descriptor {\r\n        const settings = ScrollSettings.createFrom(attr);\r\n        const expressionDesc = Descriptor.parseExpression(attr.infiniteScroller);\r\n\r\n        const descriptor = new Descriptor();\r\n        descriptor.CollectionExpression = expressionDesc.collection;\r\n        descriptor.IndexExpression = expressionDesc.index;\r\n        descriptor.TrackByExpression = expressionDesc.trackBy;\r\n        descriptor.Scope = scope;\r\n        descriptor.Settings = settings;\r\n\r\n        return descriptor;\r\n    }\r\n\r\n    private static parseExpression(expression: string): IExpressionDescriptor {\r\n        // parser logic mostly copied from ngRepeater https://github.com/angular/angular.js/blob/master/src/ng/directive/ngRepeat.js\r\n        let match = expression.match(/^\\s*([\\s\\S]+?)\\s+in\\s+([\\s\\S]+?)(?:\\s+as\\s+([\\s\\S]+?))?(?:\\s+track\\s+by\\s+([\\s\\S]+?))?\\s*$/);\r\n\r\n        if (!match) {\r\n            throw `Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '${expression}'.`;\r\n        }\r\n\r\n        const rhs = match[2];\r\n        const trackByExp = match[4];\r\n\r\n        return {\r\n            collection: rhs,\r\n            index: match[1],\r\n            trackBy: trackByExp,\r\n        };\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/descriptor.ts","export class ScrollSettings {\r\n    BufferSize: number;\r\n\r\n    private constructor() {\r\n        this.BufferSize = 10;\r\n    }\r\n\r\n    static createFrom(attr: ng.IAttributes): ScrollSettings {\r\n        const settingsObject = new ScrollSettings();\r\n\r\n        if (attr['scrollBufferSize']) {\r\n            try {\r\n                const size = parseInt(attr['scrollBufferSize']);\r\n                if (isNaN(size))\r\n                    throw '';\r\n\r\n                settingsObject.BufferSize = size;\r\n            } catch {\r\n                throw 'could not initialize scroll settings, ScrollBufferSize is not a number';\r\n            }\r\n        }\r\n\r\n        return settingsObject;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroll-settings.ts","export interface IDOMManager {\r\n    AppendElement(element: ng.IAugmentedJQuery): void;\r\n    PrependElement(element: ng.IAugmentedJQuery): void;\r\n    AppendElementToContainer(element: ng.IAugmentedJQuery, containerToAppend: ng.IAugmentedJQuery): void;\r\n    PrependElementToContainer(element: ng.IAugmentedJQuery, containerToPrepend: ng.IAugmentedJQuery): void;\r\n\r\n    GetScrollBottomPosition(): number;\r\n    GetScrollTopPosition(): number;\r\n    GetRelativePositionOf(elementRatio: number): number;\r\n\r\n    GetElementBottomPosition(element: ng.IAugmentedJQuery): number;\r\n    GetElementTopPosition(element: ng.IAugmentedJQuery): number;\r\n\r\n    FixScroll(relativePosition: number);\r\n    Remove(element: ng.IAugmentedJQuery): void;\r\n\r\n    UpdateElementsWith(elements: ng.IAugmentedJQuery[]): void;\r\n}\r\n\r\nexport class DOMManager implements IDOMManager {\r\n    private container: ng.IAugmentedJQuery;\r\n    private containerElement: HTMLElement;\r\n\r\n    constructor(element: ng.IAugmentedJQuery) {\r\n        this.container = element.parent();\r\n        this.containerElement = this.container[0];\r\n    }\r\n\r\n    GetElementTopPosition = (element: ng.IAugmentedJQuery): number => element[0].offsetTop;\r\n\r\n    Remove = (element: ng.IAugmentedJQuery) => element.remove();\r\n\r\n    GetScrollTopPosition = () => this.containerElement.offsetTop + this.containerElement.scrollTop;\r\n\r\n    GetElementBottomPosition = (element: ng.IAugmentedJQuery) => element[0].offsetTop + element[0].offsetHeight;\r\n\r\n    GetScrollBottomPosition = () => this.containerElement.offsetTop + this.containerElement.scrollTop + this.containerElement.offsetHeight;\r\n\r\n    GetRelativePositionOf = (elementRatio: number) => this.containerElement.offsetTop + this.containerElement.offsetHeight * elementRatio;\r\n\r\n    AppendElement = (element: ng.IAugmentedJQuery) => this.container.append(element);\r\n\r\n    PrependElement = (element: ng.IAugmentedJQuery) => this.container.prepend(element);\r\n\r\n    AppendElementToContainer = (element: ng.IAugmentedJQuery, containerToAppend: ng.IAugmentedJQuery) => containerToAppend.append(element);\r\n\r\n    PrependElementToContainer = (element: ng.IAugmentedJQuery, containerToPrepend: ng.IAugmentedJQuery) => containerToPrepend.prepend(element);\r\n\r\n    FixScroll = (relativePosition: number) => this.containerElement.scrollTo(0, this.containerElement.offsetHeight * relativePosition);\r\n\r\n    UpdateElementsWith = (elements: ng.IAugmentedJQuery[]): void => {\r\n        this.containerElement.innerHTML = '';\r\n        for (let element of elements) {\r\n            this.containerElement.appendChild(element[0]);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom-manager.ts","export class ScrollDetector {\r\n    private lastScrollTop = 0;\r\n    private BUFFER_COUNT = 5;\r\n\r\n    public OnScrollDown?: () => void;\r\n    public OnScrollUp?: () => void;\r\n\r\n    constructor(private element: ng.IAugmentedJQuery) { }\r\n\r\n    public SubscribeToElement = () => {\r\n        const parentEl: HTMLElement = this.element.parent()[0];\r\n\r\n        parentEl.onscroll = () => {\r\n            if (this.lastScrollTop < parentEl.scrollTop) {\r\n                const current = parentEl.scrollTop + parentEl.offsetHeight;\r\n                const bottom = parentEl.scrollHeight;\r\n\r\n                if (this.OnScrollDown && current === bottom) {\r\n                    this.OnScrollDown();\r\n                }\r\n            } else if (this.lastScrollTop > parentEl.scrollTop) {\r\n                const topElement = parentEl.children[0];\r\n                if (this.OnScrollUp && parentEl.scrollTop <= (topElement.clientHeight * this.BUFFER_COUNT)) {\r\n                    this.OnScrollUp();\r\n                }\r\n            }\r\n            this.lastScrollTop = parentEl.scrollTop;\r\n        };\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroll-detector.ts","import { Descriptor } from './descriptor';\r\nimport { ScrollDetector } from './scroll-detector';\r\nimport { IElementsManager } from './elements-manager';\r\n\r\nexport class Scroller {\r\n    private get scope(): ng.IScope {\r\n        return this.descriptor.Scope;\r\n    }\r\n\r\n    public constructor(private descriptor: Descriptor, private scrollDetector: ScrollDetector, private elementsManager: IElementsManager) {\r\n        this.scrollDetector.OnScrollDown = this.onScrollDown;\r\n        this.scrollDetector.OnScrollUp = this.onScrollUp;\r\n    }\r\n\r\n    public Subscribe() {\r\n        this.scrollDetector.SubscribeToElement();\r\n        this.scope.$watchCollection(this.descriptor.CollectionExpression, this.onCollectionUpdated);\r\n    }\r\n\r\n    private onCollectionUpdated = (newCollection: any[]): void => {\r\n        this.elementsManager.UpdateCollection(newCollection);\r\n    }\r\n\r\n    private onScrollDown = (): void => {\r\n        this.scope.$apply(() => {\r\n            this.elementsManager.AddBottom();\r\n            this.elementsManager.RemoveTop();\r\n        });\r\n    }\r\n\r\n    private onScrollUp = (): void => {\r\n        this.scope.$apply(() => {\r\n            this.elementsManager.AddTop();\r\n            this.elementsManager.RemoveBottom();\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroller.ts","import { Descriptor } from './descriptor';\r\nimport { IDOMManager } from './dom-manager';\r\nimport { IElementsManager, ElementsManager } from './elements-manager';\r\nimport { TrackByElementsManager } from './track-by-elements-manager';\r\n\r\nexport class ElementsManagerFactory {\r\n    public static createFrom(descriptor: Descriptor, domManager: IDOMManager, linker: ng.ITranscludeFunction, parser: ng.IParseService): IElementsManager {\r\n        if (descriptor.TrackByExpression) {\r\n            return new TrackByElementsManager(descriptor, domManager, linker, parser);\r\n        }\r\n\r\n        return new ElementsManager(descriptor, domManager, linker);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/elements-manager-factory.ts","import { ElementsManager, Item } from './elements-manager';\r\nimport { Descriptor } from './descriptor';\r\nimport { IDOMManager } from './dom-manager';\r\n\r\ninterface TrackableItem extends Item {\r\n    TrackByValue: string;\r\n}\r\n\r\nexport class TrackByElementsManager extends ElementsManager {\r\n    private trackByParser: ng.ICompiledExpression;\r\n    private trackedItems: { [key: string]: TrackableItem };\r\n    private tempScope: ng.IScope;\r\n\r\n    protected items: TrackableItem[];\r\n\r\n    public constructor(descriptor: Descriptor, domManager: IDOMManager, linker: ng.ITranscludeFunction, parser: ng.IParseService) {\r\n        super(descriptor, domManager, linker);\r\n\r\n        this.trackByParser = parser(descriptor.TrackByExpression);\r\n        this.trackedItems = {};\r\n        this.tempScope = this.descriptor.Scope.$new();\r\n    }\r\n\r\n    public UpdateCollection(newCollection: any[]) {\r\n        const originalLength = this.collection.length;\r\n        this.collection = newCollection;\r\n        this.fixDisplayWindow();\r\n        this.fillBottom();\r\n\r\n        if (originalLength > 0) {\r\n            this.updateItemsList();\r\n            this.updateElements();\r\n        }\r\n    }\r\n\r\n    protected transcludeElement(index: number): TrackableItem {\r\n        const item = super.transcludeElement(index) as TrackableItem;\r\n\r\n        item.TrackByValue = this.trackByParser(item.Scope);\r\n        this.trackedItems[item.TrackByValue] = item;\r\n\r\n        return item;\r\n    }\r\n\r\n    protected removeElement(index: number) {\r\n        const item = this.items[index];\r\n        delete (this.trackedItems[item.TrackByValue]);\r\n\r\n        super.removeElement(index);\r\n    }\r\n\r\n    protected onDestroy() {\r\n        super.onDestroy();\r\n        this.tempScope.$destroy();\r\n        this.trackedItems = null;\r\n    }\r\n\r\n    private updateItemsList() {\r\n        const newItemList: TrackableItem[] = [];\r\n        const newItemsHash: { [key: string]: TrackableItem } = {};\r\n\r\n        // populate new items\r\n        for (let i = this.displayFrom; i < this.displayTo; i++) {\r\n            const trackByKey = this.getTrackByOfCollectionItem(i);\r\n            const trackedItem = this.trackedItems[trackByKey];\r\n            if (trackedItem) {\r\n                newItemList.push(trackedItem);\r\n                newItemsHash[trackByKey] = trackedItem;\r\n            } else {\r\n                const newItem = this.transcludeElement(i) as TrackableItem;\r\n                newItemList.push(newItem);\r\n                newItemsHash[trackByKey] = newItem;\r\n            }\r\n        }\r\n\r\n        // clean up\r\n        for (let key of Object.keys(this.trackedItems)) {\r\n            if (!newItemsHash[key]) {\r\n                this.trackedItems[key].Scope.$destroy();\r\n            }\r\n        }\r\n\r\n        this.items = newItemList;\r\n        this.trackedItems = newItemsHash;\r\n    }\r\n\r\n    private updateElements() {\r\n        // TODO: manage elements instead of pure innerHTML\r\n        const elements = this.items.map(i => i.Element);\r\n        this.domManager.UpdateElementsWith(elements);\r\n    }\r\n\r\n    private getTrackByOfCollectionItem(index: number): string {\r\n        this.tempScope[this.descriptor.IndexExpression] = this.collection[index];\r\n        return this.trackByParser(this.tempScope);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/track-by-elements-manager.ts"],"sourceRoot":""}