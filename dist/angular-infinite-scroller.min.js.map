{"version":3,"sources":["webpack:///webpack/bootstrap bd919c833899799e6538","webpack:///./src/module.ts","webpack:///./src/descriptor.ts","webpack:///./src/scroll-settings.ts","webpack:///./src/scroller-factory.ts","webpack:///./src/elements-manager.ts","webpack:///./src/scroller.ts","webpack:///./src/revealer-elements-manager.ts","webpack:///./src/dom-manager.ts","webpack:///./src/scroll-detector.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","descriptor_1","scroller_factory_1","dom_manager_1","scroll_detector_1","scrollerModule","angular","directive","priority","restrict","transclude","link","scope","element","attr","_ctrl","linker","descriptor","Descriptor","createFrom","domManager","DOMManager","scrollDetector","ScrollDetector","ScrollerFactory","scroll_settings_1","settings","ScrollSettings","expressionDesc","parseExpression","infiniteScroller","CollectionExpression","collection","IndexExpression","index","TrackByExpression","trackBy","UseRevealer","undefined","Scope","Settings","expression","match","Error","lhs","rhs","trackByExp","this","BufferSize","settingsObject","size","parseInt","isNaN","_a","elements_manager_1","scroller_1","revealer_elements_manager_1","elementsManager","RevealerElementsManager","Scroller","ElementsManager","_this","UpdateCollection","newCollection","FillBottom","updateScopes","AddTop","countTillStop","displayFrom","newElement","transcludeElement","PrependElement","Element","items","unshift","AddBottom","parentBottom","GetScrollBottomPosition","overflowCounter","displayTo","length","item","AppendElement","push","blockEl","GetElementBottomPosition","RemoveTop","hasInvisibleChildren","el","GetScrollTopPosition","removeElement","RemoveBottom","GetElementTopPosition","childScope","$new","clone","splice","Remove","$destroy","$on","lastItem","onCollectionUpdated","onScrollDown","$apply","onScrollUp","OnScrollDown","OnScrollUp","SubscribeToElement","$watchCollection","REVEALER_SIZE_TO_CONTAINER","InitializeRevealer","newRevealer","createRevealer","revealers","isRevealerFilled","AppendElementToContainer","Items","fillUntil","GetRelativePositionOf","item_1","pop","remove","revealerSize","PrependElementToContainer","append","revealer","shift","FixScroll","_i","hasItemToBind","hasElementToBind","currentDisplayTo","filter","r","CreateRevealerElement","containerElement","offsetTop","scrollTop","offsetHeight","container","prepend","containerToAppend","containerToPrepend","parent","elementRatio","relativePosition","scrollTo","lastScrollTop","BUFFER_COUNT","parentEl","onscroll","current","bottom","scrollHeight","topElement","children","clientHeight"],"mappings":"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","file":"angular-infinite-scroller.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bd919c833899799e6538","import { Descriptor } from './descriptor';\r\nimport { ScrollerFactory } from './scroller-factory';\r\nimport { DOMManager } from './dom-manager';\r\nimport { ScrollDetector } from './scroll-detector';\r\n\r\ndeclare var angular;\r\n\r\nexport const scrollerModule = angular.module('angular-infinite-scroller', []);\r\n\r\nscrollerModule.directive('infiniteScroller', () => {\r\n    return {\r\n        priority: 1000,\r\n        restrict: 'A',\r\n        transclude: 'element',\r\n        link: (scope: ng.IScope, element: ng.IAugmentedJQuery, attr: ng.IAttributes, _ctrl, linker: ng.ITranscludeFunction) => {\r\n            const descriptor = Descriptor.createFrom(scope, attr);\r\n            const domManager = new DOMManager(element);\r\n            const scrollDetector = new ScrollDetector(element);\r\n\r\n            ScrollerFactory.createFrom(descriptor, domManager, linker, scrollDetector);\r\n        },\r\n    };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/module.ts","import { ScrollSettings } from './scroll-settings';\r\n\r\ninterface ExpressionDescriptor {\r\n    index: string;\r\n    collection: string;\r\n    trackBy: string;\r\n}\r\n\r\nexport class Descriptor {\r\n    public Settings: ScrollSettings;\r\n    public CollectionExpression: string;\r\n    public IndexExpression: string;\r\n    public TrackByExpression: string;\r\n    public UseRevealer: boolean;\r\n    public Scope: ng.IScope;\r\n\r\n    private constructor() { }\r\n\r\n    static createFrom(scope: ng.IScope, attr: ng.IAttributes): Descriptor {\r\n        const settings = ScrollSettings.createFrom(attr);\r\n        const expressionDesc = Descriptor.parseExpression(attr.infiniteScroller);\r\n\r\n        const descriptor = new Descriptor();\r\n        descriptor.CollectionExpression = expressionDesc.collection;\r\n        descriptor.IndexExpression = expressionDesc.index;\r\n        descriptor.TrackByExpression = expressionDesc.trackBy;\r\n        descriptor.UseRevealer = attr['useRevealer'] !== undefined;\r\n        descriptor.Scope = scope;\r\n        descriptor.Settings = settings;\r\n\r\n        return descriptor;\r\n    }\r\n\r\n    private static parseExpression(expression: string): ExpressionDescriptor {\r\n        // parser logic mostly copied from ngRepeater https://github.com/angular/angular.js/blob/master/src/ng/directive/ngRepeat.js\r\n        let match = expression.match(/^\\s*([\\s\\S]+?)\\s+in\\s+([\\s\\S]+?)(?:\\s+track\\s+by\\s+([\\s\\S]+?))?\\s*$/);\r\n\r\n        if (!match) {\r\n            throw Error(`Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '${expression}'.`);\r\n        }\r\n\r\n        const lhs = match[1];\r\n        const rhs = match[2];\r\n        const trackByExp = match[3];\r\n\r\n        match = lhs.match(/^(?:(\\s*[$\\w]+))$/);\r\n\r\n        if (!match) {\r\n            throw Error(`'_item_' in '_item_ in _collection_' should be an identifier but got '${lhs}'.`);\r\n        }\r\n\r\n        return {\r\n            collection: rhs,\r\n            index: match[1],\r\n            trackBy: trackByExp,\r\n        };\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/descriptor.ts","export class ScrollSettings {\r\n    BufferSize: number;\r\n\r\n    private constructor() {\r\n        this.BufferSize = 10;\r\n    }\r\n\r\n    static createFrom(attr: ng.IAttributes): ScrollSettings {\r\n        const settingsObject = new ScrollSettings();\r\n\r\n        if (attr['scrollBufferSize']) {\r\n            try {\r\n                const size = parseInt(attr['scrollBufferSize']);\r\n                if (isNaN(size))\r\n                    throw '';\r\n\r\n                settingsObject.BufferSize = size;\r\n            } catch {\r\n                throw 'could not initialize scroll settings, ScrollBufferSize is not a number';\r\n            }\r\n        }\r\n\r\n        return settingsObject;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroll-settings.ts","import { Descriptor } from './descriptor';\r\nimport { ScrollDetector } from './scroll-detector';\r\nimport { ElementsManager } from './elements-manager';\r\nimport { Scroller } from './scroller';\r\nimport { RevealerElementsManager } from './revealer-elements-manager';\r\nimport { DOMManager } from './dom-manager';\r\n\r\nexport class ScrollerFactory {\r\n    static createFrom(descriptor: Descriptor, domManager: DOMManager, linker: ng.ITranscludeFunction, scrollDetector: ScrollDetector): Scroller {\r\n        if (descriptor.UseRevealer) {\r\n            const elementsManager = new RevealerElementsManager(descriptor, domManager, linker);\r\n            return new Scroller(descriptor, scrollDetector, elementsManager);\r\n        } else {\r\n            const elementsManager = new ElementsManager(descriptor, domManager, linker);\r\n            return new Scroller(descriptor, scrollDetector, elementsManager);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroller-factory.ts","import { Descriptor } from './descriptor';\r\nimport { IDOMManager } from './dom-manager';\r\n\r\nexport type Item = {\r\n    Element: ng.IAugmentedJQuery;\r\n    Scope: ng.IScope;\r\n};\r\n\r\nexport interface IElementsManager {\r\n    UpdateCollection(newCollection: any[]): void;\r\n    AddTop(): void;\r\n    AddBottom(): void;\r\n    RemoveTop(): void;\r\n    RemoveBottom(): void;\r\n}\r\n\r\nexport class ElementsManager implements IElementsManager {\r\n    private collection: any[];\r\n    private items: Item[];\r\n    private displayFrom: number;\r\n    private displayTo: number;\r\n\r\n    constructor(private descriptor: Descriptor, private domManager: IDOMManager, private linker: ng.ITranscludeFunction) {\r\n        this.items = [];\r\n        this.displayFrom = 0;\r\n        this.displayTo = 0;\r\n\r\n        // this way the memory can only leak until the scroller lives\r\n        this.descriptor.Scope.$on('$destroy', () => {\r\n            this.items = [];\r\n        });\r\n    }\r\n\r\n    public UpdateCollection = (newCollection: any[]) => {\r\n        this.collection = newCollection;\r\n        this.FillBottom();\r\n        this.updateScopes();\r\n    }\r\n\r\n    public AddTop = () => {\r\n        let countTillStop = this.descriptor.Settings.BufferSize;\r\n\r\n        let i = 0;\r\n        for (i = this.displayFrom - 1; i >= 0 && countTillStop > 0; i--) {\r\n            const newElement = this.transcludeElement(i);\r\n            this.domManager.PrependElement(newElement.Element);\r\n            this.items.unshift(newElement);\r\n\r\n            countTillStop--;\r\n        }\r\n\r\n        this.displayFrom = i + 1;\r\n    }\r\n\r\n    public AddBottom = () => {\r\n        const parentBottom = this.domManager.GetScrollBottomPosition();\r\n\r\n        // add this many children below visible area\r\n        let overflowCounter = this.descriptor.Settings.BufferSize;\r\n\r\n        let i = 0;\r\n        for (i = this.displayTo; i < this.collection.length && overflowCounter > 0; i++) {\r\n            const item = this.transcludeElement(i);\r\n            this.domManager.AppendElement(item.Element);\r\n            this.items.push(item);\r\n\r\n            const blockEl = item.Element;\r\n            const blockBottom = this.domManager.GetElementBottomPosition(blockEl);\r\n\r\n            if (blockBottom > parentBottom) {\r\n                overflowCounter--;\r\n            }\r\n        }\r\n\r\n        this.displayTo = i;\r\n    }\r\n\r\n    public RemoveTop = () => {\r\n        let hasInvisibleChildren = true;\r\n        while (hasInvisibleChildren) {\r\n            if (this.items.length <= this.descriptor.Settings.BufferSize) {\r\n                break;\r\n            }\r\n\r\n            const el = this.items[this.descriptor.Settings.BufferSize].Element;\r\n            const elementBottom = this.domManager.GetElementBottomPosition(el);\r\n            const scrollTop = this.domManager.GetScrollTopPosition();\r\n\r\n            if (elementBottom < scrollTop) {\r\n                this.removeElement(0);\r\n                this.displayFrom++;\r\n            } else {\r\n                hasInvisibleChildren = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    public RemoveBottom = () => {\r\n        if (this.items.length < this.descriptor.Settings.BufferSize) {\r\n            return;\r\n        }\r\n\r\n        let hasInvisibleChildren = true;\r\n        while (hasInvisibleChildren) {\r\n            const el = this.items[this.items.length - this.descriptor.Settings.BufferSize].Element;\r\n            const elementTop = this.domManager.GetElementTopPosition(el);\r\n            const bottom = this.domManager.GetScrollBottomPosition();\r\n\r\n            if (elementTop > bottom) {\r\n                this.removeElement(this.items.length - 1);\r\n                this.displayTo--;\r\n            } else {\r\n                hasInvisibleChildren = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    private FillBottom() {\r\n        const parentBottom = this.domManager.GetScrollBottomPosition();\r\n\r\n        // don't add more if elements are already out of sight\r\n        if (this.items.length > 0) {\r\n            const lastItem = this.items[this.items.length - 1];\r\n            const lastItemBottom = this.domManager.GetElementBottomPosition(lastItem.Element);\r\n\r\n            if (lastItemBottom > parentBottom) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.AddBottom();\r\n    }\r\n\r\n    private updateScopes = () => {\r\n        for (let i = 0; i < this.items.length; i++) {\r\n            const item = this.items[i];\r\n            item.Scope[this.descriptor.IndexExpression] = this.collection[this.displayFrom + i];\r\n        }\r\n\r\n        // TODO: clean dom if removal took place\r\n    }\r\n\r\n    private transcludeElement = (index: number): Item => {\r\n        const item = {} as Item;\r\n\r\n        const childScope = this.descriptor.Scope.$new();\r\n        childScope[this.descriptor.IndexExpression] = this.collection[index];\r\n\r\n        this.linker(childScope, (clone: ng.IAugmentedJQuery) => {\r\n            item.Element = clone;\r\n            item.Scope = childScope;\r\n        });\r\n\r\n        return item;\r\n    }\r\n\r\n    private removeElement = (index: number) => {\r\n        const item = this.items.splice(index, 1)[0];\r\n        this.domManager.Remove(item.Element);\r\n        item.Scope.$destroy();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/elements-manager.ts","import { Descriptor } from './descriptor';\r\nimport { ScrollDetector } from './scroll-detector';\r\nimport { IElementsManager } from './elements-manager';\r\n\r\nexport class Scroller {\r\n    private get scope(): ng.IScope {\r\n        return this.descriptor.Scope;\r\n    }\r\n\r\n    public constructor(private descriptor: Descriptor, private scrollDetector: ScrollDetector, private elementsManager: IElementsManager) {\r\n        this.scrollDetector.OnScrollDown = this.onScrollDown;\r\n        this.scrollDetector.OnScrollUp = this.onScrollUp;\r\n\r\n        this.scrollDetector.SubscribeToElement();\r\n\r\n        this.scope.$watchCollection(descriptor.CollectionExpression, this.onCollectionUpdated);\r\n    }\r\n\r\n    private onCollectionUpdated = (newCollection: any[]): void => {\r\n        this.elementsManager.UpdateCollection(newCollection);\r\n    }\r\n\r\n    private onScrollDown = (): void => {\r\n        this.scope.$apply(() => {\r\n            this.elementsManager.AddBottom();\r\n            this.elementsManager.RemoveTop();\r\n        });\r\n    }\r\n\r\n    private onScrollUp = (): void => {\r\n        this.scope.$apply(() => {\r\n            this.elementsManager.AddTop();\r\n            this.elementsManager.RemoveBottom();\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroller.ts","import { Item, IElementsManager } from './elements-manager';\r\nimport { Descriptor } from './descriptor';\r\nimport { DOMManager } from './dom-manager';\r\n\r\ntype Revealer = {\r\n    Element: ng.IAugmentedJQuery;\r\n    Items: Item[];\r\n};\r\n\r\nexport class RevealerElementsManager implements IElementsManager {\r\n    private collection: any[];\r\n    private displayFrom: number;\r\n    private displayTo: number;\r\n\r\n    private revealers: Revealer[];\r\n    private revealerSize: number;\r\n\r\n    private REVEALER_SIZE_TO_CONTAINER = 0.75;\r\n\r\n    constructor(private descriptor: Descriptor, private domManager: DOMManager, private linker: ng.ITranscludeFunction) {\r\n        this.revealers = [];\r\n        this.displayFrom = 0;\r\n        this.displayTo = 0;\r\n\r\n        // this way the memory can only leak until the scroller lives\r\n        this.descriptor.Scope.$on('$destroy', () => {\r\n            this.revealers = [];\r\n        });\r\n    }\r\n\r\n    public UpdateCollection = (newCollection: any[]) => {\r\n        if (this.collection === undefined) {\r\n            this.collection = newCollection;\r\n            this.InitializeRevealer();\r\n            this.AddBottom();\r\n        } else {\r\n            this.collection = newCollection;\r\n            this.updateScopes();\r\n        }\r\n    }\r\n\r\n    public InitializeRevealer = () => {\r\n        const newRevealer = this.createRevealer();\r\n        this.revealers.push(newRevealer);\r\n        this.domManager.AppendElement(newRevealer.Element);\r\n\r\n        let i = 0;\r\n        let isRevealerFilled = false;\r\n\r\n        while (!isRevealerFilled) {\r\n            if (i >= this.collection.length)\r\n                break;\r\n\r\n            const item = this.transcludeElement(i);\r\n            this.domManager.AppendElementToContainer(item.Element, newRevealer.Element);\r\n            newRevealer.Items.push(item);\r\n\r\n            const fillUntil = this.domManager.GetRelativePositionOf(this.REVEALER_SIZE_TO_CONTAINER);\r\n            const blockBottom = this.domManager.GetElementBottomPosition(item.Element);\r\n\r\n            if (blockBottom > fillUntil) {\r\n                /*\r\n                    i had no better idea how to detect bottom line for the case of using floats,\r\n                    so when the first element passes the line, let's just correct it by removing that one\r\n                 */\r\n                const item = newRevealer.Items.pop();\r\n                item.Scope.$destroy();\r\n                item.Element.remove();\r\n\r\n                isRevealerFilled = true;\r\n                break;\r\n            }\r\n\r\n            i++;\r\n        }\r\n\r\n        this.revealerSize = i;\r\n        this.displayTo = i;\r\n    }\r\n\r\n    public AddTop = () => {\r\n        if (this.displayFrom === 0) {\r\n            return;\r\n        }\r\n\r\n        const newRevealer = this.createRevealer();\r\n        this.revealers.unshift(newRevealer);\r\n        this.domManager.PrependElement(newRevealer.Element);\r\n\r\n        let i = 0;\r\n        for (i = 0; i < this.revealerSize; i++) {\r\n            const index = this.displayFrom + 1 - i;\r\n            if (index < 0) {\r\n                break;\r\n            }\r\n\r\n            const newElement = this.transcludeElement(this.displayFrom - 1 - i);\r\n            this.domManager.PrependElementToContainer(newElement.Element, newRevealer.Element);\r\n            newRevealer.Items.unshift(newElement);\r\n        }\r\n\r\n        this.displayFrom -= i;\r\n    }\r\n\r\n    public AddBottom = () => {\r\n        if (this.displayTo >= this.collection.length) {\r\n            return;\r\n        }\r\n\r\n        const newRevealer = this.createRevealer();\r\n        this.revealers.push(newRevealer);\r\n        this.domManager.AppendElement(newRevealer.Element);\r\n\r\n        let i = 0;\r\n        for (i = 0; i < this.revealerSize && this.displayTo + i < this.collection.length; i++) {\r\n            const item = this.transcludeElement(this.displayTo + i);\r\n            newRevealer.Element.append(item.Element);\r\n            newRevealer.Items.push(item);\r\n        }\r\n\r\n        this.displayTo += i;\r\n    }\r\n\r\n    public RemoveTop = () => {\r\n        if (this.revealers.length <= 3) {\r\n            return;\r\n        }\r\n\r\n        const revealer = this.revealers.shift();\r\n        this.displayFrom += revealer.Items.length;\r\n\r\n        while (revealer.Items.length > 0) {\r\n            const item = revealer.Items.pop();\r\n            item.Element.remove(); // TODO: might be unnecessary, since we remove the revealer too\r\n            item.Scope.$destroy();\r\n        }\r\n\r\n        revealer.Element.remove();\r\n    }\r\n\r\n    public RemoveBottom = () => {\r\n        if (this.revealers.length <= 3) {\r\n            return;\r\n        }\r\n\r\n        const revealer = this.revealers.pop();\r\n        this.displayTo -= revealer.Items.length;\r\n\r\n        while (revealer.Items.length > 0) {\r\n            const item = revealer.Items.pop();\r\n            this.domManager.Remove(item.Element);\r\n            item.Scope.$destroy();\r\n        }\r\n\r\n        this.domManager.Remove(revealer.Element);\r\n        this.domManager.FixScroll(0.5);\r\n    }\r\n\r\n    private updateScopes = () => {\r\n        let index = this.displayFrom;\r\n\r\n        for (let revealer of this.revealers) {\r\n            for (let i = 0; i < this.revealerSize; i++) {\r\n                const hasItemToBind = index < this.collection.length;\r\n                const hasElementToBind = revealer.Items.length > i;\r\n\r\n                if (hasItemToBind && hasElementToBind) {\r\n                    // nothing special, bind scope\r\n                    revealer.Items[i].Scope[this.descriptor.IndexExpression] = this.collection[index];\r\n                } else if (hasItemToBind) {\r\n                    // create element and bind\r\n                    const item = this.transcludeElement(index);\r\n                    this.domManager.AppendElementToContainer(item.Element, revealer.Element);\r\n                    revealer.Items.push(item);\r\n                } else if (hasElementToBind) {\r\n                    // remove element\r\n                    const item = revealer.Items.pop();\r\n                    item.Scope.$destroy();\r\n                    this.domManager.Remove(item.Element);\r\n                } else {\r\n                    continue;\r\n                }\r\n\r\n                index++;\r\n            }\r\n\r\n            if (revealer.Items.length === 0) {\r\n                // remove revealer if it's not necessary anymore\r\n                this.domManager.Remove(revealer.Element);\r\n            }\r\n        }\r\n\r\n        const currentDisplayTo = this.displayTo;\r\n        this.displayTo = index;\r\n\r\n        if (index < currentDisplayTo && this.collection.length > index) {\r\n            // create new revealers if necessary\r\n            this.AddBottom();\r\n        } else {\r\n            // remove unnecessary revealers\r\n            this.revealers = this.revealers.filter(r => r.Items.length > 0);\r\n        }\r\n    }\r\n\r\n    private transcludeElement = (index: number): Item => {\r\n        const item = {} as Item;\r\n\r\n        const childScope = this.descriptor.Scope.$new();\r\n        childScope[this.descriptor.IndexExpression] = this.collection[index];\r\n\r\n        this.linker(childScope, (clone: ng.IAugmentedJQuery) => {\r\n            item.Element = clone;\r\n            item.Scope = childScope;\r\n        });\r\n\r\n        return item;\r\n    }\r\n\r\n    private createRevealer = (): Revealer => {\r\n        const revealerElement = this.domManager.CreateRevealerElement();\r\n\r\n        const revealer: Revealer = {\r\n            Element: revealerElement,\r\n            Items: [],\r\n        };\r\n\r\n        return revealer;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/revealer-elements-manager.ts","declare var angular;\r\n\r\nexport interface IDOMManager {\r\n    CreateRevealerElement(): ng.IAugmentedJQuery;\r\n\r\n    AppendElement(element: ng.IAugmentedJQuery): void;\r\n    PrependElement(element: ng.IAugmentedJQuery): void;\r\n    AppendElementToContainer(element: ng.IAugmentedJQuery, containerToAppend: ng.IAugmentedJQuery): void;\r\n    PrependElementToContainer(element: ng.IAugmentedJQuery, containerToPrepend: ng.IAugmentedJQuery): void;\r\n\r\n    GetScrollBottomPosition(): number;\r\n    GetScrollTopPosition(): number;\r\n    GetRelativePositionOf(elementRatio: number): number;\r\n\r\n    GetElementBottomPosition(element: ng.IAugmentedJQuery): number;\r\n    GetElementTopPosition(element: ng.IAugmentedJQuery): number;\r\n\r\n    FixScroll(relativePosition: number);\r\n    Remove(element: ng.IAugmentedJQuery): void;\r\n}\r\n\r\nexport class DOMManager implements IDOMManager {\r\n    private container: ng.IAugmentedJQuery;\r\n    private containerElement: HTMLElement;\r\n\r\n    constructor(element: ng.IAugmentedJQuery) {\r\n        this.container = element.parent();\r\n        this.containerElement = this.container[0];\r\n    }\r\n\r\n    CreateRevealerElement(): ng.IAugmentedJQuery {\r\n        return angular.element('<div class=\"revealer\"></div>');\r\n    }\r\n\r\n    GetElementTopPosition(element: ng.IAugmentedJQuery): number {\r\n        return element[0].offsetTop;\r\n    }\r\n    Remove(element: ng.IAugmentedJQuery): void {\r\n        element.remove();\r\n    }\r\n    GetScrollTopPosition = () => {\r\n        return this.containerElement.offsetTop + this.containerElement.scrollTop;\r\n    }\r\n    GetElementBottomPosition(element: ng.IAugmentedJQuery) {\r\n        return element[0].offsetTop + element[0].offsetHeight;\r\n    }\r\n    GetScrollBottomPosition = () => {\r\n        return this.containerElement.offsetTop + this.containerElement.scrollTop + this.containerElement.offsetHeight;\r\n    }\r\n    GetRelativePositionOf(elementRatio: number): number {\r\n        return this.containerElement.offsetTop + this.containerElement.offsetHeight * elementRatio;\r\n    }\r\n    AppendElement = (element: ng.IAugmentedJQuery) => {\r\n        this.container.append(element);\r\n    }\r\n    PrependElement = (element: ng.IAugmentedJQuery) => {\r\n        this.container.prepend(element);\r\n    }\r\n    AppendElementToContainer = (element: ng.IAugmentedJQuery, containerToAppend: ng.IAugmentedJQuery) => {\r\n        containerToAppend.append(element);\r\n    }\r\n    PrependElementToContainer = (element: ng.IAugmentedJQuery, containerToPrepend: ng.IAugmentedJQuery) => {\r\n        containerToPrepend.prepend(element);\r\n    }\r\n    FixScroll(relativePosition: number) {\r\n        this.containerElement.scrollTo(0, this.containerElement.offsetHeight * relativePosition);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom-manager.ts","export class ScrollDetector {\r\n    private lastScrollTop = 0;\r\n    private BUFFER_COUNT = 5;\r\n\r\n    public OnScrollDown?: () => void;\r\n    public OnScrollUp?: () => void;\r\n\r\n    constructor(private element: ng.IAugmentedJQuery) { }\r\n\r\n    public SubscribeToElement = () => {\r\n        const parentEl: HTMLElement = this.element.parent()[0];\r\n\r\n        parentEl.onscroll = () => {\r\n            if (this.lastScrollTop < parentEl.scrollTop) {\r\n                const current = parentEl.scrollTop + parentEl.offsetHeight;\r\n                const bottom = parentEl.scrollHeight;\r\n\r\n                if (this.OnScrollDown && current === bottom) {\r\n                    this.OnScrollDown();\r\n                }\r\n            } else if (this.lastScrollTop > parentEl.scrollTop) {\r\n                const topElement = parentEl.children[0];\r\n                if (this.OnScrollUp && parentEl.scrollTop <= (topElement.clientHeight * this.BUFFER_COUNT)) {\r\n                    this.OnScrollUp();\r\n                }\r\n            }\r\n            this.lastScrollTop = parentEl.scrollTop;\r\n        };\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroll-detector.ts"],"sourceRoot":""}