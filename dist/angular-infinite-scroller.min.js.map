{"version":3,"sources":["webpack:///webpack/bootstrap f2671f7a93fb7d6fd7e5","webpack:///./src/elements-manager.ts","webpack:///./src/module.ts","webpack:///./src/descriptor.ts","webpack:///./src/scroll-settings.ts","webpack:///./src/dom-manager.ts","webpack:///./src/scroll-detector.ts","webpack:///./src/scroller.ts","webpack:///./src/elements-manager-factory.ts","webpack:///./src/track-by-elements-manager.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","ElementsManager","descriptor","domManager","linker","_this","this","fixDisplayWindow","endDiff","displayTo","collection","length","fixedFrom","displayFrom","cleanUpBottom","items","removeElement","overwriteScopes","Scope","IndexExpression","$on","onDestroy","UpdateCollection","newCollection","fillBottom","AddTop","countTillStop","Settings","BufferSize","newElement","transcludeElement","PrependElement","Element","unshift","AddBottom","parentBottom","GetScrollBottomPosition","overflowCounter","item","AppendElement","push","blockEl","GetElementBottomPosition","RemoveTop","hasInvisibleChildren","el","GetScrollTopPosition","RemoveBottom","GetElementTopPosition","lastItem","index","childScope","$new","clone","splice","Remove","$destroy","descriptor_1","dom_manager_1","scroll_detector_1","scroller_1","elements_manager_factory_1","scrollerModule","angular","directive","parser","priority","restrict","transclude","link","scope","element","attr","_ctrl","Descriptor","createFrom","DOMManager","document","scrollDetector","ScrollDetector","elementsManager","ElementsManagerFactory","Scroller","Subscribe","scroll_settings_1","settings","ScrollSettings","expressionDesc","parseExpression","infiniteScroller","CollectionExpression","TrackByExpression","trackBy","expression","match","Error","lhs","rhs","trackByExp","settingsObject","size","parseInt","isNaN","_a","containerElement","offsetTop","scrollTop","offsetHeight","container","append","prepend","AppendElementToContainer","containerToAppend","PrependElementToContainer","containerToPrepend","parent","CreateRevealerElement","remove","GetRelativePositionOf","elementRatio","FixScroll","relativePosition","scrollTo","UpdateElementsWith","elements","elementsFragment","createDocumentFragment","div","createElement","appendChild","_i","elements_1","innerHTML","lastScrollTop","BUFFER_COUNT","SubscribeToElement","parentEl","onscroll","current","bottom","scrollHeight","OnScrollDown","topElement","children","OnScrollUp","clientHeight","onCollectionUpdated","onScrollDown","$apply","onScrollUp","$watchCollection","elements_manager_1","track_by_elements_manager_1","TrackByElementsManager","_super","trackByParser","trackedItems","tempScope","__extends","originalLength","updateItemsList","updateElements","TrackByValue","newItemList","newItemsHash","trackByKey","getTrackByOfCollectionItem","newItem","keys","key","map"],"mappings":"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","file":"angular-infinite-scroller.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f2671f7a93fb7d6fd7e5","import { Descriptor } from './descriptor';\nimport { IDOMManager } from './dom-manager';\n\nexport interface Item {\n    Element: ng.IAugmentedJQuery;\n    Scope: ng.IScope;\n}\n\nexport interface IElementsManager {\n    UpdateCollection(newCollection: any[]): void;\n    AddTop(): void;\n    AddBottom(): void;\n    RemoveTop(): void;\n    RemoveBottom(): void;\n}\n\nexport class ElementsManager implements IElementsManager {\n    protected collection: any[];\n    protected items: Item[];\n    protected displayFrom: number;\n    protected displayTo: number;\n\n    public constructor(protected descriptor: Descriptor, protected domManager: IDOMManager, protected linker: ng.ITranscludeFunction) {\n        this.collection = [];\n        this.items = [];\n        this.displayFrom = 0;\n        this.displayTo = 0;\n\n        this.descriptor.Scope.$on('$destroy', () => this.onDestroy);\n    }\n\n    public UpdateCollection(newCollection: any[]) {\n        this.collection = newCollection;\n        this.fixDisplayWindow();\n        this.fillBottom();\n        this.overwriteScopes();\n        this.cleanUpBottom();\n    }\n\n    public AddTop() {\n        let countTillStop = this.descriptor.Settings.BufferSize;\n\n        let i = 0;\n        for (i = this.displayFrom - 1; i >= 0 && countTillStop > 0; i--) {\n            const newElement = this.transcludeElement(i);\n            this.domManager.PrependElement(newElement.Element);\n            this.items.unshift(newElement);\n\n            countTillStop--;\n        }\n\n        this.displayFrom = i + 1;\n    }\n\n    public AddBottom() {\n        const parentBottom = this.domManager.GetScrollBottomPosition();\n\n        // add this many children below visible area\n        let overflowCounter = this.descriptor.Settings.BufferSize;\n\n        let i = 0;\n        for (i = this.displayTo; i < this.collection.length && overflowCounter > 0; i++) {\n            const item = this.transcludeElement(i);\n            this.domManager.AppendElement(item.Element);\n            this.items.push(item);\n\n            const blockEl = item.Element;\n            const blockBottom = this.domManager.GetElementBottomPosition(blockEl);\n\n            if (blockBottom > parentBottom) {\n                overflowCounter--;\n            }\n        }\n\n        this.displayTo = i;\n    }\n\n    public RemoveTop() {\n        let hasInvisibleChildren = true;\n        while (hasInvisibleChildren) {\n            if (this.items.length <= this.descriptor.Settings.BufferSize) {\n                break;\n            }\n\n            const el = this.items[this.descriptor.Settings.BufferSize].Element;\n            const elementBottom = this.domManager.GetElementBottomPosition(el);\n            const scrollTop = this.domManager.GetScrollTopPosition();\n\n            if (elementBottom < scrollTop) {\n                this.removeElement(0);\n                this.displayFrom++;\n            } else {\n                hasInvisibleChildren = false;\n            }\n        }\n    }\n\n    public RemoveBottom() {\n        if (this.items.length < this.descriptor.Settings.BufferSize) {\n            return;\n        }\n\n        let hasInvisibleChildren = true;\n        while (hasInvisibleChildren) {\n            const el = this.items[this.items.length - this.descriptor.Settings.BufferSize].Element;\n            const elementTop = this.domManager.GetElementTopPosition(el);\n            const bottom = this.domManager.GetScrollBottomPosition();\n\n            if (elementTop > bottom) {\n                this.removeElement(this.items.length - 1);\n                this.displayTo--;\n            } else {\n                hasInvisibleChildren = false;\n            }\n        }\n    }\n\n    // tries to keep the current windows size, but adjust window based on the new collection size\n    protected fixDisplayWindow = () => {\n        const endDiff = this.displayTo - this.collection.length;\n        if (endDiff > 0) {\n            this.displayTo -= endDiff;\n            const fixedFrom = this.displayFrom - endDiff;\n            this.displayFrom = fixedFrom > 0 ? fixedFrom : 0;\n        }\n    }\n\n    protected onDestroy() {\n        this.items = [];\n    }\n\n    protected fillBottom() {\n        const parentBottom = this.domManager.GetScrollBottomPosition();\n\n        // don't add more if elements are already out of sight\n        if (this.items.length > 0) {\n            const lastItem = this.items[this.items.length - 1];\n            const lastItemBottom = this.domManager.GetElementBottomPosition(lastItem.Element);\n\n            if (lastItemBottom > parentBottom) {\n                return;\n            }\n        }\n\n        this.AddBottom();\n    }\n\n    protected cleanUpBottom = () => {\n        let i = this.collection.length;\n        while (i < this.items.length) {\n            this.removeElement(i);\n        }\n    }\n\n    protected transcludeElement(index: number): Item {\n        const item = {} as Item;\n\n        const childScope = this.descriptor.Scope.$new();\n        childScope[this.descriptor.IndexExpression] = this.collection[index];\n\n        this.linker(childScope, (clone: ng.IAugmentedJQuery) => {\n            item.Element = clone;\n            item.Scope = childScope;\n        });\n\n        return item;\n    }\n\n    protected removeElement(index: number) {\n        const item = this.items.splice(index, 1)[0];\n        this.domManager.Remove(item.Element);\n        item.Scope.$destroy();\n    }\n\n    private overwriteScopes = () => {\n        for (let i = 0; i < this.items.length; i++) {\n            const item = this.items[i];\n            item.Scope[this.descriptor.IndexExpression] = this.collection[this.displayFrom + i];\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/elements-manager.ts","import { Descriptor } from './descriptor';\nimport { DOMManager } from './dom-manager';\nimport { ScrollDetector } from './scroll-detector';\nimport { Scroller } from './scroller';\nimport { ElementsManagerFactory } from './elements-manager-factory';\n\ndeclare var angular;\n\nexport const scrollerModule = angular.module('angular-infinite-scroller', []);\n\nscrollerModule.directive('infiniteScroller', ['$parse', (parser: ng.IParseService) => {\n    return {\n        priority: 1000,\n        restrict: 'A',\n        transclude: 'element',\n        link: (scope: ng.IScope, element: ng.IAugmentedJQuery, attr: ng.IAttributes, _ctrl, linker: ng.ITranscludeFunction) => {\n            const descriptor = Descriptor.createFrom(scope, attr);\n            const domManager = new DOMManager(element, document);\n            const scrollDetector = new ScrollDetector(element);\n            const elementsManager = ElementsManagerFactory.createFrom(descriptor, domManager, linker, parser);\n\n            const scroller = new Scroller(descriptor, scrollDetector, elementsManager);\n\n            scroller.Subscribe();\n        },\n    };\n}]);\n\n\n\n// WEBPACK FOOTER //\n// ./src/module.ts","import { ScrollSettings } from './scroll-settings';\n\ninterface IExpressionDescriptor {\n    index: string;\n    collection: string;\n    trackBy: string;\n}\n\nexport class Descriptor {\n    public Settings: ScrollSettings;\n    public CollectionExpression: string;\n    public IndexExpression: string;\n    public TrackByExpression: string;\n    public Scope: ng.IScope;\n\n    private constructor() { }\n\n    static createFrom(scope: ng.IScope, attr: ng.IAttributes): Descriptor {\n        const settings = ScrollSettings.createFrom(attr);\n        const expressionDesc = Descriptor.parseExpression(attr.infiniteScroller);\n\n        const descriptor = new Descriptor();\n        descriptor.CollectionExpression = expressionDesc.collection;\n        descriptor.IndexExpression = expressionDesc.index;\n        descriptor.TrackByExpression = expressionDesc.trackBy;\n        descriptor.Scope = scope;\n        descriptor.Settings = settings;\n\n        return descriptor;\n    }\n\n    private static parseExpression(expression: string): IExpressionDescriptor {\n        // parser logic mostly copied from ngRepeater https://github.com/angular/angular.js/blob/master/src/ng/directive/ngRepeat.js\n        let match = expression.match(/^\\s*([\\s\\S]+?)\\s+in\\s+([\\s\\S]+?)(?:\\s+as\\s+([\\s\\S]+?))?(?:\\s+track\\s+by\\s+([\\s\\S]+?))?\\s*$/);\n\n        if (!match) {\n            throw Error(`Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '${expression}'.`);\n        }\n\n        const lhs = match[1];\n        const rhs = match[2];\n        const trackByExp = match[4];\n\n        match = lhs.match(/^(?:(\\s*[$\\w]+)|\\(\\s*([$\\w]+)\\s*,\\s*([$\\w]+)\\s*\\))$/);\n\n        if (!match) {\n            throw '\\'_item_\\' in \\'_item_ in _collection_\\' should be an identifier or \\'(_key_, _value_)\\' expression, but got \\'{0}\\'.';\n        }\n\n        return {\n            collection: rhs,\n            index: match[1],\n            trackBy: trackByExp,\n        };\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/descriptor.ts","export class ScrollSettings {\n    BufferSize: number;\n\n    private constructor() {\n        this.BufferSize = 10;\n    }\n\n    static createFrom(attr: ng.IAttributes): ScrollSettings {\n        const settingsObject = new ScrollSettings();\n\n        if (attr['scrollBufferSize']) {\n            try {\n                const size = parseInt(attr['scrollBufferSize']);\n                if (isNaN(size))\n                    throw '';\n\n                settingsObject.BufferSize = size;\n            } catch {\n                throw 'could not initialize scroll settings, ScrollBufferSize is not a number';\n            }\n        }\n\n        return settingsObject;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroll-settings.ts","declare var angular;\n\nexport interface IDOMManager {\n    CreateRevealerElement(): ng.IAugmentedJQuery;\n\n    AppendElement(element: ng.IAugmentedJQuery): void;\n    PrependElement(element: ng.IAugmentedJQuery): void;\n    AppendElementToContainer(element: ng.IAugmentedJQuery, containerToAppend: ng.IAugmentedJQuery): void;\n    PrependElementToContainer(element: ng.IAugmentedJQuery, containerToPrepend: ng.IAugmentedJQuery): void;\n\n    GetScrollBottomPosition(): number;\n    GetScrollTopPosition(): number;\n    GetRelativePositionOf(elementRatio: number): number;\n\n    GetElementBottomPosition(element: ng.IAugmentedJQuery): number;\n    GetElementTopPosition(element: ng.IAugmentedJQuery): number;\n\n    FixScroll(relativePosition: number);\n    Remove(element: ng.IAugmentedJQuery): void;\n\n    UpdateElementsWith(elements: ng.IAugmentedJQuery[]): void;\n}\n\nexport class DOMManager implements IDOMManager {\n    private container: ng.IAugmentedJQuery;\n    private containerElement: HTMLElement;\n\n    constructor(element: ng.IAugmentedJQuery, private document: Document) {\n        this.container = element.parent();\n        this.containerElement = this.container[0];\n    }\n\n    CreateRevealerElement(): ng.IAugmentedJQuery {\n        return angular.element('<div class=\"revealer\"></div>');\n    }\n\n    GetElementTopPosition(element: ng.IAugmentedJQuery): number {\n        return element[0].offsetTop;\n    }\n    Remove(element: ng.IAugmentedJQuery): void {\n        element.remove();\n    }\n    GetScrollTopPosition = () => {\n        return this.containerElement.offsetTop + this.containerElement.scrollTop;\n    }\n    GetElementBottomPosition(element: ng.IAugmentedJQuery) {\n        return element[0].offsetTop + element[0].offsetHeight;\n    }\n    GetScrollBottomPosition = () => {\n        return this.containerElement.offsetTop + this.containerElement.scrollTop + this.containerElement.offsetHeight;\n    }\n    GetRelativePositionOf(elementRatio: number): number {\n        return this.containerElement.offsetTop + this.containerElement.offsetHeight * elementRatio;\n    }\n    AppendElement = (element: ng.IAugmentedJQuery) => {\n        this.container.append(element);\n    }\n    PrependElement = (element: ng.IAugmentedJQuery) => {\n        this.container.prepend(element);\n    }\n    AppendElementToContainer = (element: ng.IAugmentedJQuery, containerToAppend: ng.IAugmentedJQuery) => {\n        containerToAppend.append(element);\n    }\n    PrependElementToContainer = (element: ng.IAugmentedJQuery, containerToPrepend: ng.IAugmentedJQuery) => {\n        containerToPrepend.prepend(element);\n    }\n    FixScroll(relativePosition: number) {\n        this.containerElement.scrollTo(0, this.containerElement.offsetHeight * relativePosition);\n    }\n    UpdateElementsWith(elements: ng.IAugmentedJQuery[]): void {\n        const elementsFragment = this.document.createDocumentFragment();\n        const div = this.document.createElement('div');\n        elementsFragment.appendChild(div);\n\n        for (let element of elements) {\n            div.appendChild(element[0]);\n        }\n\n        this.containerElement.innerHTML = div.innerHTML;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom-manager.ts","export class ScrollDetector {\n    private lastScrollTop = 0;\n    private BUFFER_COUNT = 5;\n\n    public OnScrollDown?: () => void;\n    public OnScrollUp?: () => void;\n\n    constructor(private element: ng.IAugmentedJQuery) { }\n\n    public SubscribeToElement = () => {\n        const parentEl: HTMLElement = this.element.parent()[0];\n\n        parentEl.onscroll = () => {\n            if (this.lastScrollTop < parentEl.scrollTop) {\n                const current = parentEl.scrollTop + parentEl.offsetHeight;\n                const bottom = parentEl.scrollHeight;\n\n                if (this.OnScrollDown && current === bottom) {\n                    this.OnScrollDown();\n                }\n            } else if (this.lastScrollTop > parentEl.scrollTop) {\n                const topElement = parentEl.children[0];\n                if (this.OnScrollUp && parentEl.scrollTop <= (topElement.clientHeight * this.BUFFER_COUNT)) {\n                    this.OnScrollUp();\n                }\n            }\n            this.lastScrollTop = parentEl.scrollTop;\n        };\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroll-detector.ts","import { Descriptor } from './descriptor';\nimport { ScrollDetector } from './scroll-detector';\nimport { IElementsManager } from './elements-manager';\n\nexport class Scroller {\n    private get scope(): ng.IScope {\n        return this.descriptor.Scope;\n    }\n\n    public constructor(private descriptor: Descriptor, private scrollDetector: ScrollDetector, private elementsManager: IElementsManager) {\n        this.scrollDetector.OnScrollDown = this.onScrollDown;\n        this.scrollDetector.OnScrollUp = this.onScrollUp;\n    }\n\n    public Subscribe() {\n        this.scrollDetector.SubscribeToElement();\n        this.scope.$watchCollection(this.descriptor.CollectionExpression, this.onCollectionUpdated);\n    }\n\n    private onCollectionUpdated = (newCollection: any[]): void => {\n        this.elementsManager.UpdateCollection(newCollection);\n    }\n\n    private onScrollDown = (): void => {\n        this.scope.$apply(() => {\n            this.elementsManager.AddBottom();\n            this.elementsManager.RemoveTop();\n        });\n    }\n\n    private onScrollUp = (): void => {\n        this.scope.$apply(() => {\n            this.elementsManager.AddTop();\n            this.elementsManager.RemoveBottom();\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroller.ts","import { Descriptor } from './descriptor';\r\nimport { IDOMManager } from './dom-manager';\r\nimport { IElementsManager, ElementsManager } from './elements-manager';\r\nimport { TrackByElementsManager } from './track-by-elements-manager';\r\n\r\nexport class ElementsManagerFactory {\r\n    public static createFrom(descriptor: Descriptor, domManager: IDOMManager, linker: ng.ITranscludeFunction, parser: ng.IParseService): IElementsManager {\r\n        if (descriptor.TrackByExpression) {\r\n            return new TrackByElementsManager(descriptor, domManager, linker, parser);\r\n        }\r\n\r\n        return new ElementsManager(descriptor, domManager, linker);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/elements-manager-factory.ts","import { ElementsManager, Item } from './elements-manager';\r\nimport { Descriptor } from './descriptor';\r\nimport { IDOMManager } from './dom-manager';\r\n\r\ninterface TrackableItem extends Item {\r\n    TrackByValue: string;\r\n}\r\n\r\nexport class TrackByElementsManager extends ElementsManager {\r\n    private trackByParser: ng.ICompiledExpression;\r\n    private trackedItems: { [key: string]: TrackableItem };\r\n    private tempScope: ng.IScope;\r\n\r\n    protected items: TrackableItem[];\r\n\r\n    public constructor(descriptor: Descriptor, domManager: IDOMManager, linker: ng.ITranscludeFunction, parser: ng.IParseService) {\r\n        super(descriptor, domManager, linker);\r\n\r\n        this.trackByParser = parser(descriptor.TrackByExpression);\r\n        this.trackedItems = {};\r\n        this.tempScope = this.descriptor.Scope.$new();\r\n    }\r\n\r\n    public UpdateCollection(newCollection: any[]) {\r\n        const originalLength = this.collection.length;\r\n        this.collection = newCollection;\r\n        this.fixDisplayWindow();\r\n        this.fillBottom();\r\n\r\n        if (originalLength > 0) {\r\n            this.updateItemsList();\r\n            this.updateElements();\r\n        }\r\n    }\r\n\r\n    protected transcludeElement(index: number): TrackableItem {\r\n        const item = super.transcludeElement(index) as TrackableItem;\r\n\r\n        item.TrackByValue = this.trackByParser(item.Scope);\r\n        this.trackedItems[item.TrackByValue] = item;\r\n\r\n        return item;\r\n    }\r\n\r\n    protected removeElement(index: number) {\r\n        const item = this.items[index];\r\n        delete (this.trackedItems[item.TrackByValue]);\r\n\r\n        super.removeElement(index);\r\n    }\r\n\r\n    protected onDestroy() {\r\n        super.onDestroy();\r\n        this.tempScope.$destroy();\r\n        this.trackedItems = null;\r\n    }\r\n\r\n    private updateItemsList() {\r\n        const newItemList: TrackableItem[] = [];\r\n        const newItemsHash: { [key: string]: TrackableItem } = {};\r\n\r\n        // populate new items\r\n        for (let i = this.displayFrom; i < this.displayTo; i++) {\r\n            const trackByKey = this.getTrackByOfCollectionItem(i);\r\n            if (this.trackedItems[trackByKey]) {\r\n                newItemList.push(this.trackedItems[i]);\r\n                newItemsHash[trackByKey] = this.trackedItems[i];\r\n            } else {\r\n                const newItem = this.transcludeElement(i) as TrackableItem;\r\n                newItemList.push(newItem);\r\n                newItemsHash[trackByKey] = newItem;\r\n            }\r\n        }\r\n\r\n        // clean up\r\n        for (let key of Object.keys(this.trackedItems)) {\r\n            if (!newItemsHash[key]) {\r\n                this.trackedItems[key].Scope.$destroy();\r\n            }\r\n        }\r\n\r\n        this.items = newItemList;\r\n        this.trackedItems = newItemsHash;\r\n    }\r\n\r\n    private updateElements() {\r\n        // TODO: manage elements instead of pure innerHTML\r\n        const elements = this.items.map(i => i.Element);\r\n        this.domManager.UpdateElementsWith(elements);\r\n    }\r\n\r\n    private getTrackByOfCollectionItem(index: number): string {\r\n        this.tempScope[this.descriptor.IndexExpression] = this.collection[index];\r\n        return this.trackByParser(this.tempScope);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/track-by-elements-manager.ts"],"sourceRoot":""}