{"version":3,"sources":["webpack:///webpack/bootstrap c4938aca4a0f7a4a549a","webpack:///./src/module.ts","webpack:///./src/descriptor.ts","webpack:///./src/scroller-factory.ts","webpack:///./src/elements-manager.ts","webpack:///./src/scroller.ts","webpack:///./src/revealer-elements-manager.ts","webpack:///./src/dom-manager.ts","webpack:///./src/scroll-detector.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","descriptor_1","scroller_factory_1","dom_manager_1","scroll_detector_1","angular","directive","transclude","link","scope","element","attr","ctrl","linker","descriptor","Descriptor","createFrom","domManager","DOMManager","scrollDetector","ScrollDetector","ScrollerFactory","ScrollSettings","this","BufferSize","settingsObject","size","parseInt","isNaN","_a","match","infiniteScroller","indexString","collectionString","settings","CollectionString","IndexString","UseRevealer","undefined","Scope","Settings","elements_manager_1","scroller_1","revealer_elements_manager_1","elementsManager","RevealerElementsManager","Scroller","ElementsManager","_this","UpdateCollection","newCollection","collection","AddBottom","updateScopes","AddTop","countTillStop","displayFrom","newElement","transcludeElement","PrependElementToContainer","Element","items","unshift","overflowCounter","displayTo","length","item","AppendElementToContainer","push","blockEl","parentBottom","GetScrollBottomPosition","GetElementBottomPosition","RemoveTop","hasInvisibleChildren","el","GetScrollTopPosition","removeElement","RemoveBottom","GetElementTopPosition","index","childScope","$new","clone","splice","Remove","$destroy","$on","onCollectionUpdated","onScrollDown","$apply","onScrollUp","OnScrollDown","OnScrollUp","SubscribeToElement","$watchCollection","BUFFER_COUNT","LOAD_COUNT","REVEALER_SIZE_TO_CONTAINER","InitializeRevealer","_i","revealers","revealer","revealerSize","hasItemToBind","hasElementToBind","Items","append","pop","remove","currentDisplayTo","filter","r","newRevealer","createRevealer","isRevealerFilled","fillUntil","GetRelativePositionOf","item_1","prepend","shift","FixScroll","containerElement","offsetTop","scrollTop","offsetHeight","container","parent","elementRatio","relativePosition","scrollTo","lastScrollTop","parentEl","bind","scrollHeight","topElement","children"],"mappings":"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","file":"angular-infinite-scroll.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c4938aca4a0f7a4a549a","import { Descriptor } from './descriptor';\r\nimport { ScrollerFactory } from \"./scroller-factory\";\r\nimport { DOMManager } from './dom-manager';\r\nimport { ScrollDetector } from './scroll-detector';\r\n\r\ndeclare var angular;\r\n\r\nconst scrollerModule = angular.module('angular-infinite-scroller', []);\r\n\r\nscrollerModule.directive('infiniteScroller', () => {\r\n    return {\r\n        transclude: 'element',\r\n        link: (scope: ng.IScope, element: JQLite, attr: ng.IAttributes, ctrl, linker: ng.ITranscludeFunction) => {\r\n            const descriptor = Descriptor.createFrom(scope, attr);\r\n            const domManager = new DOMManager(element);\r\n            const scrollDetector = new ScrollDetector(element);\r\n            const scroller = ScrollerFactory.createFrom(descriptor, domManager, linker, scrollDetector);\r\n        }\r\n    }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/module.ts","export class ScrollSettings {\r\n    BufferSize: number;\r\n\r\n    private constructor() { \r\n        this.BufferSize = 10;\r\n    }\r\n\r\n    static createFrom(attr: ng.IAttributes): ScrollSettings {\r\n        const settingsObject = new ScrollSettings();\r\n\r\n        if (attr['scrollBufferSize']) {\r\n            try {\r\n                const size = parseInt(attr['scrollBufferSize']);\r\n                if (isNaN(size))\r\n                    throw '';\r\n\r\n                settingsObject.BufferSize = size;\r\n            } catch {\r\n                throw \"could not initialize scroll settings, ScrollBufferSize is not a number\";\r\n            }\r\n        }\r\n\r\n        return settingsObject;\r\n    }\r\n}\r\n\r\nexport class Descriptor {\r\n    private constructor() { }\r\n\r\n    public Settings: ScrollSettings;\r\n    public CollectionString: string\r\n    public IndexString: string;\r\n    public UseRevealer: boolean;\r\n    public Scope: ng.IScope;\r\n\r\n    static createFrom(scope: ng.IScope, attr: ng.IAttributes): Descriptor {\r\n        const loop = attr.infiniteScroller,\r\n            match = loop.match(/^\\s*(.+)\\s+in\\s+(.*?)$/),\r\n            indexString = match[1],\r\n            collectionString = match[2];\r\n\r\n        const settings = ScrollSettings.createFrom(attr);\r\n\r\n        const descriptor = new Descriptor();\r\n        descriptor.CollectionString = collectionString;\r\n        descriptor.IndexString = indexString;\r\n        descriptor.UseRevealer = attr['useRevealer'] != undefined;\r\n        descriptor.Scope = scope;\r\n        descriptor.Settings = settings;\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/descriptor.ts","import { Descriptor } from \"./descriptor\";\r\nimport { ScrollDetector } from \"./scroll-detector\";\r\nimport { ElementsManager } from \"./elements-manager\";\r\nimport { Scroller } from \"./scroller\";\r\nimport { RevealerElementsManager } from \"./revealer-elements-manager\";\r\nimport { DOMManager } from \"./dom-manager\";\r\n\r\nexport class ScrollerFactory {\r\n    static createFrom(descriptor: Descriptor, domManager: DOMManager, linker: ng.ITranscludeFunction, scrollDetector: ScrollDetector): Scroller {\r\n        if (descriptor.UseRevealer) {\r\n            const elementsManager = new RevealerElementsManager(descriptor, domManager, linker);\r\n            return new Scroller(descriptor, scrollDetector, elementsManager);\r\n        } else {\r\n            const elementsManager = new ElementsManager(descriptor, domManager, linker);\r\n            return new Scroller(descriptor, scrollDetector, elementsManager);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroller-factory.ts","import { Descriptor } from \"./descriptor\";\r\nimport { IDOMManager } from \"./dom-manager\";\r\n\r\nexport type Item = {\r\n    Element: JQLite,\r\n    Scope: ng.IScope\r\n}\r\n\r\nexport interface IElementsManager {\r\n    UpdateCollection(newCollection: any[]): void;\r\n    AddTop(): void;\r\n    AddBottom(): void;\r\n    RemoveTop(): void;\r\n    RemoveBottom(): void;\r\n}\r\n\r\nexport class ElementsManager implements IElementsManager {\r\n    private collection: any[];\r\n    private items: Item[];\r\n    private displayFrom: number;\r\n    private displayTo: number;\r\n\r\n    constructor(private descriptor: Descriptor, private domManager: IDOMManager, private linker: ng.ITranscludeFunction) {\r\n        this.items = [];\r\n        this.displayFrom = 0;\r\n        this.displayTo = 0;\r\n\r\n        // this way the memory can only leak until the scroller lives\r\n        this.descriptor.Scope.$on('$destroy', () => {\r\n            this.items = [];\r\n        });\r\n    }\r\n\r\n    public UpdateCollection = (newCollection: any[]) => {\r\n        if (this.collection == undefined) {\r\n            this.collection = newCollection;\r\n            this.AddBottom();\r\n        } else {\r\n            this.collection = newCollection;\r\n            this.updateScopes();\r\n        }\r\n    }\r\n\r\n    public AddTop = () => {\r\n        let countTillStop = this.descriptor.Settings.BufferSize;\r\n\r\n        for (var i = this.displayFrom - 1; i >= 0 && countTillStop > 0; i--) {\r\n            const newElement = this.transcludeElement(i);\r\n            this.domManager.PrependElementToContainer(newElement.Element);\r\n            this.items.unshift(newElement);\r\n\r\n            countTillStop--;\r\n        }\r\n\r\n        this.displayFrom = i + 1;\r\n    };\r\n\r\n    public AddBottom = () => {\r\n        // add this many children below visible area\r\n        let overflowCounter = this.descriptor.Settings.BufferSize;\r\n\r\n        for (var i = this.displayTo; i < this.collection.length && overflowCounter > 0; i++) {\r\n            const item = this.transcludeElement(i);\r\n            this.domManager.AppendElementToContainer(item.Element);\r\n            this.items.push(item);\r\n\r\n            const blockEl = item.Element;\r\n            const parentBottom = this.domManager.GetScrollBottomPosition();\r\n            const blockBottom = this.domManager.GetElementBottomPosition(blockEl);\r\n\r\n            if (blockBottom > parentBottom) {\r\n                overflowCounter--;\r\n            }\r\n        }\r\n\r\n        this.displayTo = i;\r\n    };\r\n\r\n    public RemoveTop = () => {\r\n        if (this.items.length < this.descriptor.Settings.BufferSize) {\r\n            return;\r\n        }\r\n\r\n        let hasInvisibleChildren = true;\r\n        while (hasInvisibleChildren) {\r\n            const el = this.items[this.descriptor.Settings.BufferSize].Element;\r\n            const elementBottom = this.domManager.GetElementBottomPosition(el);\r\n            const scrollTop = this.domManager.GetScrollTopPosition();\r\n\r\n            if (elementBottom < scrollTop) {\r\n                this.removeElement(0);\r\n                this.displayFrom++;\r\n            } else {\r\n                hasInvisibleChildren = false;\r\n            }\r\n        }\r\n    };\r\n\r\n    public RemoveBottom = () => {\r\n        if (this.items.length < this.descriptor.Settings.BufferSize) {\r\n            return;\r\n        }\r\n\r\n        let hasInvisibleChildren = true;\r\n        while (hasInvisibleChildren) {\r\n            const el = this.items[this.items.length - this.descriptor.Settings.BufferSize].Element;\r\n            const elementTop = this.domManager.GetElementTopPosition(el);\r\n            const bottom = this.domManager.GetScrollBottomPosition();\r\n\r\n            if (elementTop > bottom) {\r\n                this.removeElement(this.items.length - 1);\r\n                this.displayTo--;\r\n            } else {\r\n                hasInvisibleChildren = false;\r\n            }\r\n        }\r\n    };\r\n\r\n    private updateScopes = () => {\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            const item = this.items[i];\r\n            item.Scope[this.descriptor.IndexString] = this.collection[this.displayFrom + i];\r\n        }\r\n\r\n        // TODO: clean dom if removal took place \r\n    };\r\n\r\n    private transcludeElement = (index: number): Item => {\r\n        const item = {} as Item;\r\n\r\n        const childScope = this.descriptor.Scope.$new();\r\n        childScope[this.descriptor.IndexString] = this.collection[index];\r\n\r\n        this.linker(childScope, (clone: JQLite) => {\r\n            item.Element = clone;\r\n            item.Scope = childScope;\r\n        });\r\n\r\n        return item;\r\n    }\r\n\r\n    private removeElement = (index: number) => {\r\n        const item = this.items.splice(index, 1)[0];\r\n        this.domManager.Remove(item.Element);\r\n        item.Scope.$destroy();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/elements-manager.ts","import { Descriptor } from \"./descriptor\";\r\nimport { ScrollDetector } from \"./scroll-detector\";\r\nimport { IElementsManager } from \"./elements-manager\";\r\n\r\nexport class Scroller {\r\n    private get scope(): ng.IScope {\r\n        return this.descriptor.Scope;\r\n    }\r\n\r\n    public constructor(private descriptor: Descriptor, private scrollDetector: ScrollDetector, private elementsManager: IElementsManager) {\r\n        this.scrollDetector.OnScrollDown = this.onScrollDown;\r\n        this.scrollDetector.OnScrollUp = this.onScrollUp;\r\n\r\n        this.scrollDetector.SubscribeToElement();\r\n        \r\n        this.scope.$watchCollection(descriptor.CollectionString, this.onCollectionUpdated);\r\n    }\r\n\r\n    private onCollectionUpdated = (newCollection: any[]): void => {\r\n        this.elementsManager.UpdateCollection(newCollection);\r\n    };\r\n\r\n    private onScrollDown = (): void => {\r\n        this.scope.$apply(() => {\r\n            this.elementsManager.AddBottom();\r\n            this.elementsManager.RemoveTop();\r\n        });\r\n    };\r\n\r\n    private onScrollUp = (): void => {\r\n        this.scope.$apply(() => {\r\n            this.elementsManager.AddTop();\r\n            this.elementsManager.RemoveBottom();\r\n        });\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroller.ts","import { Item, IElementsManager } from \"./elements-manager\";\r\nimport { Descriptor } from \"./descriptor\";\r\nimport { DOMManager } from \"./dom-manager\";\r\n\r\ndeclare var angular;\r\n\r\ntype Revealer = {\r\n    Element: JQLite;\r\n    Items: Item[];\r\n}\r\n\r\nexport class RevealerElementsManager implements IElementsManager {\r\n    private collection: any[];\r\n    private displayFrom: number;\r\n    private displayTo: number;\r\n\r\n    private revealers: Revealer[];\r\n    private revealerSize: number;\r\n\r\n    private BUFFER_COUNT = 5;\r\n    private LOAD_COUNT = 10;\r\n    private REVEALER_SIZE_TO_CONTAINER = 0.75\r\n\r\n    constructor(private descriptor: Descriptor, private domManager: DOMManager, private linker: ng.ITranscludeFunction) {\r\n        this.revealers = [];\r\n        this.displayFrom = 0;\r\n        this.displayTo = 0;\r\n\r\n        // this way the memory can only leak until the scroller lives\r\n        this.descriptor.Scope.$on('$destroy', () => {\r\n            this.revealers = [];\r\n        });\r\n    }\r\n\r\n    public UpdateCollection = (newCollection: any[]) => {\r\n        if (this.collection == undefined) {\r\n            this.collection = newCollection;\r\n            this.InitializeRevealer();\r\n            this.AddBottom();\r\n        } else {\r\n            this.collection = newCollection;\r\n            this.updateScopes();\r\n        }\r\n    }\r\n\r\n    private updateScopes = () => {\r\n        let index = this.displayFrom;\r\n\r\n        for (let revealer of this.revealers) {\r\n            for (let i = 0; i < this.revealerSize; i++) {\r\n                const hasItemToBind = index < this.collection.length;\r\n                const hasElementToBind = revealer.Items.length > i;\r\n\r\n                if (hasItemToBind && hasElementToBind) {\r\n                    // nothing special, bind scope\r\n                    revealer.Items[i].Scope[this.descriptor.IndexString] = this.collection[index];\r\n                } else if (hasItemToBind) {\r\n                    // create element and bind\r\n                    const item = this.transcludeElement(index);\r\n                    revealer.Element.append(item.Element);\r\n                    revealer.Items.push(item);\r\n                } else if (hasElementToBind) {\r\n                    // remove element\r\n                    const item = revealer.Items.pop();\r\n                    item.Scope.$destroy();\r\n                    item.Element.remove();\r\n                } else {\r\n                    continue;\r\n                }\r\n\r\n                index++;\r\n            }\r\n\r\n            if (revealer.Items.length == 0) {\r\n                // remove revealer if it's not necessary anymore\r\n                revealer.Element.remove();\r\n            }\r\n        }\r\n\r\n        const currentDisplayTo = this.displayTo;\r\n        this.displayTo = index;\r\n\r\n        if (index < currentDisplayTo && this.collection.length > index) {\r\n            // create new revealers if necessary\r\n            this.AddBottom();\r\n        } else {\r\n            // remove unnecessary revealers\r\n            this.revealers = this.revealers.filter(r => r.Items.length > 0);\r\n        }\r\n    }\r\n\r\n    public InitializeRevealer = () => {\r\n        const newRevealer = this.createRevealer();\r\n        this.revealers.push(newRevealer);\r\n        this.domManager.AppendElementToContainer(newRevealer.Element);\r\n\r\n        let i = 0;\r\n        let isRevealerFilled = false;\r\n\r\n        while (!isRevealerFilled) {\r\n            const item = this.transcludeElement(i);\r\n            newRevealer.Element.append(item.Element);\r\n            newRevealer.Items.push(item);\r\n\r\n            const blockEl = item.Element[0];\r\n            const fillUntil = this.domManager.GetRelativePositionOf(this.REVEALER_SIZE_TO_CONTAINER);\r\n            const blockBottom = this.domManager.GetElementBottomPosition(item.Element);\r\n\r\n            if (blockBottom > fillUntil) {\r\n                /* \r\n                    i had no better idea how to detect bottom line for the case of using floats,\r\n                    so when the first element passes the line, let's just correct it by removing that one\r\n                 */\r\n                const item = newRevealer.Items.pop();\r\n                item.Scope.$destroy();\r\n                item.Element.remove();\r\n\r\n                isRevealerFilled = true;\r\n                break;\r\n            }\r\n\r\n            i++;\r\n        }\r\n\r\n        this.revealerSize = i;\r\n        this.displayTo = i;\r\n    };\r\n\r\n    public AddTop = () => {\r\n        if (this.displayFrom == 0) {\r\n            return;\r\n        }\r\n\r\n        const newRevealer = this.createRevealer();\r\n        this.revealers.unshift(newRevealer);\r\n        this.domManager.PrependElementToContainer(newRevealer.Element);\r\n\r\n        let countTillStop = this.LOAD_COUNT;\r\n\r\n        for (var i = 0; i < this.revealerSize; i++) {\r\n            const index = this.displayFrom + 1 - i;\r\n            if (index < 0) {\r\n                break;\r\n            }\r\n\r\n            const newElement = this.transcludeElement(this.displayFrom - 1 - i);\r\n            newRevealer.Element.prepend(newElement.Element);\r\n            newRevealer.Items.unshift(newElement);\r\n        }\r\n\r\n        this.displayFrom -= i;\r\n    };\r\n\r\n    public AddBottom = () => {\r\n        if (this.displayTo == this.collection.length) {\r\n            return;\r\n        }\r\n\r\n        const newRevealer = this.createRevealer();\r\n        this.revealers.push(newRevealer);\r\n        this.domManager.AppendElementToContainer(newRevealer.Element);\r\n\r\n        for (var i = 0; i < this.revealerSize && this.displayTo + i < this.collection.length; i++) {\r\n            const item = this.transcludeElement(this.displayTo + i);\r\n            newRevealer.Element.append(item.Element);\r\n            newRevealer.Items.push(item);\r\n        }\r\n\r\n        this.displayTo += i;\r\n    };\r\n\r\n    public RemoveTop = () => {\r\n        if (this.revealers.length <= 3) {\r\n            return;\r\n        }\r\n\r\n        const revealer = this.revealers.shift();\r\n        this.displayFrom += revealer.Items.length;\r\n\r\n        while (revealer.Items.length > 0) {\r\n            const item = revealer.Items.pop();\r\n            item.Element.remove(); // TODO: might be unnecessary, since we remove the revealer too\r\n            item.Scope.$destroy();\r\n        }\r\n\r\n        revealer.Element.remove();\r\n    };\r\n\r\n    public RemoveBottom = () => {\r\n        if (this.revealers.length <= 3) {\r\n            return;\r\n        }\r\n\r\n        const revealer = this.revealers.pop();\r\n        this.displayTo -= revealer.Items.length;\r\n\r\n        while (revealer.Items.length > 0) {\r\n            const item = revealer.Items.pop();\r\n            item.Element.remove(); // TODO: might be unnecessary, since we remove the revealer too\r\n            item.Scope.$destroy();\r\n        }\r\n\r\n        revealer.Element.remove();\r\n        this.domManager.FixScroll(0.5);\r\n    };\r\n\r\n    private transcludeElement = (index: number): Item => {\r\n        const item = {} as Item;\r\n\r\n        const childScope = this.descriptor.Scope.$new();\r\n        childScope[this.descriptor.IndexString] = this.collection[index];\r\n\r\n        this.linker(childScope, (clone: JQLite) => {\r\n            item.Element = clone;\r\n            item.Scope = childScope;\r\n        });\r\n\r\n        return item;\r\n    }\r\n\r\n    private createRevealer = (): Revealer => {\r\n        const revealerElement = angular.element('<div class=\"revealer\"></div>');\r\n\r\n        const revealer: Revealer = {\r\n            Element: revealerElement,\r\n            Items: []\r\n        };\r\n\r\n        return revealer;\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/revealer-elements-manager.ts","export interface IDOMManager {\r\n    AppendElementToContainer(element: JQLite): void;\r\n    PrependElementToContainer(element: JQLite): void;\r\n\r\n    GetScrollBottomPosition(): number;\r\n    GetScrollTopPosition(): number;\r\n    GetRelativePositionOf(elementRatio: number): number;\r\n\r\n    GetElementBottomPosition(element: JQLite): number;\r\n    GetElementTopPosition(element: JQLite): number;\r\n\r\n    FixScroll(relativePosition: number);\r\n    Remove(element: JQLite): void;\r\n}\r\n\r\nexport class DOMManager implements IDOMManager {\r\n    \r\n    private container: JQLite;\r\n    private containerElement: HTMLElement;\r\n\r\n    constructor(private element: JQLite) {\r\n        this.container = element.parent();\r\n        this.containerElement = this.container[0];\r\n    }\r\n\r\n    GetElementTopPosition(element: JQLite): number {\r\n        return element[0].offsetTop;\r\n    }\r\n    Remove(element: JQLite): void {\r\n        element.remove();\r\n    }\r\n    GetScrollTopPosition = () => {\r\n        return this.containerElement.offsetTop + this.containerElement.scrollTop;\r\n    }\r\n    GetElementBottomPosition(element: JQLite) {\r\n        return element[0].offsetTop + element[0].offsetHeight;\r\n    }\r\n    GetScrollBottomPosition = () => {\r\n        return this.containerElement.offsetTop + this.containerElement.scrollTop + this.containerElement.offsetHeight;\r\n    }\r\n    GetRelativePositionOf(elementRatio: number): number {\r\n        return this.containerElement.offsetTop + this.containerElement.offsetHeight * elementRatio;\r\n    }\r\n    AppendElementToContainer = (element: JQLite) => {\r\n        this.container.append(element);\r\n    }\r\n    PrependElementToContainer = (element: JQLite) => {\r\n        this.container.prepend(element);\r\n    }\r\n    FixScroll(relativePosition: number) {\r\n        this.containerElement.scrollTo(0, this.containerElement.offsetHeight / 2);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/dom-manager.ts","export class ScrollDetector {\r\n    private lastScrollTop = 0;\r\n    private BUFFER_COUNT = 5;\r\n\r\n    constructor(private element: JQLite) {\r\n\r\n    }\r\n\r\n    public SubscribeToElement = () => {\r\n        const parent: JQLite = this.element.parent();\r\n        const parentEl: HTMLElement = parent[0];\r\n\r\n        parent.bind('scroll', () => {\r\n            if (this.lastScrollTop < parentEl.scrollTop) {\r\n                const current = parentEl.scrollTop + parentEl.offsetHeight;\r\n                const bottom = parentEl.scrollHeight;\r\n\r\n                if (current == bottom) {\r\n                    this.OnScrollDown && this.OnScrollDown();\r\n                }\r\n            } else if (this.lastScrollTop > parentEl.scrollTop) {\r\n                const topElement = parentEl.children[0];\r\n                if (topElement && parentEl.scrollTop <= (topElement.scrollHeight * this.BUFFER_COUNT)) {\r\n                    this.OnScrollUp && this.OnScrollUp();\r\n                }\r\n            }\r\n            this.lastScrollTop = parent[0].scrollTop;\r\n        });\r\n    }\r\n\r\n    public OnScrollDown?: () => void;\r\n    public OnScrollUp?: () => void;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroll-detector.ts"],"sourceRoot":""}